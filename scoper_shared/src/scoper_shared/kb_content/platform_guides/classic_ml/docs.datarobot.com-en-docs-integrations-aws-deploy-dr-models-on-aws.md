[ DataRobot docs ](../../index.html "DataRobot docs")

  * [ Data ](../../data/index.html) [ Data ](../../data/index.html)
    * [ Data connections ](../../data/connect-data/index.html) [ Data connections ](../../data/connect-data/index.html)
      * [ Share secure configurations ](../../data/connect-data/secure-config.html)
      * [ Data connections ](../../data/connect-data/data-conn.html)
    * [ AI Catalog ](../../data/ai-catalog/index.html) [ AI Catalog ](../../data/ai-catalog/index.html)
      * [ Load data ](../../data/ai-catalog/catalog.html)
      * [ Manage assets ](../../data/ai-catalog/manage-asset.html)
      * [ Work with assets ](../../data/ai-catalog/catalog-asset.html)
      * [ Schedule snapshots ](../../data/ai-catalog/snapshot.html)
      * [ Prepare data with Spark SQL ](../../data/ai-catalog/spark.html)
    * [ Import data ](../../data/import-data/index.html) [ Import data ](../../data/import-data/index.html)
      * [ Import to DataRobot directly ](../../data/import-data/import-to-dr.html)
      * [ Large datasets ](../../data/import-data/large-data/index.html) [ Large datasets ](../../data/import-data/large-data/index.html)
        * [ Fast EDA for large datasets ](../../data/import-data/large-data/fast-eda.html)
    * [ Transform data ](../../data/transform-data/index.html) [ Transform data ](../../data/transform-data/index.html)
      * [ Interaction-based transformations ](../../data/transform-data/feature-disc.html)
      * [ Feature Discovery ](../../data/transform-data/feature-discovery/index.html) [ Feature Discovery ](../../data/transform-data/feature-discovery/index.html)
        * [ End-to-end Feature Discovery ](../../data/transform-data/feature-discovery/enrich-data-using-feature-discovery.html)
        * [ Set up Feature Discovery projects ](../../data/transform-data/feature-discovery/fd-overview.html)
        * [ Snowflake integration ](../../data/transform-data/feature-discovery/fd-snowflake.html)
        * [ Feature Discovery settings ](../../data/transform-data/feature-discovery/fd-adv-opt.html)
        * [ Time-aware feature engineering ](../../data/transform-data/feature-discovery/fd-time.html)
        * [ Derived features ](../../data/transform-data/feature-discovery/fd-gen.html)
        * [ Predictions ](../../data/transform-data/feature-discovery/fd-predict.html)
      * [ Manual transformations ](../../data/transform-data/feature-transforms.html)
    * [ Analyze data ](../../data/analyze-data/index.html) [ Analyze data ](../../data/analyze-data/index.html)
      * [ Assess data quality with EDA ](../../data/analyze-data/assess-data-quality-eda.html)
      * [ Analyze features using histograms ](../../data/analyze-data/analyze-histogram.html)
      * [ Analyze frequent values ](../../data/analyze-data/analyze-frequent-values.html)
      * [ Feature details ](../../data/analyze-data/histogram.html)
      * [ Exploratory Spatial Data Analysis (ESDA) ](../../data/analyze-data/lai-esda.html)
      * [ Feature Associations ](../../data/analyze-data/feature-assoc.html)
      * [ Use data pipelines for ingest and transformation ](../../data/analyze-data/pipelines.html)
    * [ Data preview features ](../../data/data-preview/index.html) [ Data preview features ](../../data/data-preview/index.html)
      * [ Create feature lists in the Relationship Editor ](../../data/data-preview/safer-rel-editor-feature-lists.html)
    * [ Data FAQ ](../../data/data-faq.html)
  * [ Modeling ](../../modeling/index.html) [ Modeling ](../../modeling/index.html)
    * [ Build models ](../../modeling/build-models/index.html) [ Build models ](../../modeling/build-models/index.html)
      * [ Build models ](../../modeling/build-models/build-basic/index.html) [ Build models ](../../modeling/build-models/build-basic/index.html)
        * [ Basic model workflow ](../../modeling/build-models/build-basic/model-data.html)
        * [ Work with feature lists ](../../modeling/build-models/build-basic/feature-lists.html)
        * [ Unlock Holdout ](../../modeling/build-models/build-basic/unlocking-holdout.html)
        * [ Comprehensive Autopilot ](../../modeling/build-models/build-basic/more-accuracy.html)
        * [ Add/delete models ](../../modeling/build-models/build-basic/creating-addl-models.html)
        * [ Frozen runs ](../../modeling/build-models/build-basic/frozen-run.html)
        * [ Model Repository ](../../modeling/build-models/build-basic/repository.html)
      * [ Advanced options ](../../modeling/build-models/adv-opt/index.html) [ Advanced options ](../../modeling/build-models/adv-opt/index.html)
        * [ Additional ](../../modeling/build-models/adv-opt/additional.html)
        * [ Bias and Fairness ](../../modeling/build-models/adv-opt/fairness-metrics.html)
        * [ Clustering advanced options ](../../modeling/build-models/adv-opt/time-series-cluster-adv-opt.html)
        * [ External Predictions ](../../modeling/build-models/adv-opt/external-preds.html)
        * [ Feature Constraints ](../../modeling/build-models/adv-opt/feature-con.html)
        * [ Image Augmentation ](../../modeling/build-models/adv-opt/ttia.html)
        * [ Partitioning ](../../modeling/build-models/adv-opt/partitioning.html)
        * [ Smart Downsampling ](../../modeling/build-models/adv-opt/smart-ds.html)
        * [ Time series ](../../modeling/build-models/adv-opt/time-series-adv-opt.html)
        * [ GPUs for deep learning ](../../modeling/build-models/adv-opt/gpus.html)
    * [ Model insights ](../../modeling/analyze-models/index.html) [ Model insights ](../../modeling/analyze-models/index.html)
      * [ Evaluate ](../../modeling/analyze-models/evaluate/index.html) [ Evaluate ](../../modeling/analyze-models/evaluate/index.html)
        * [ Accuracy Over Space ](../../modeling/special-workflows/location-ai/lai-insights.html)
        * [ Accuracy Over Time ](../../modeling/analyze-models/evaluate/aot.html)
        * [ Advanced Tuning ](../../modeling/analyze-models/evaluate/adv-tuning.html)
        * [ Anomaly visualizations ](../../modeling/analyze-models/evaluate/anom-viz.html)
        * [ Confusion Matrix (for multiclass models) ](../../modeling/analyze-models/evaluate/multiclass.html)
        * [ Forecasting Accuracy ](../../modeling/analyze-models/evaluate/forecast-acc.html)
        * [ Forecast vs Actual ](../../modeling/analyze-models/evaluate/fore-act.html)
        * [ Lift Chart ](../../modeling/analyze-models/evaluate/lift-chart.html)
        * [ Period Accuracy ](../../modeling/analyze-models/evaluate/period-accuracy.html)
        * [ Residuals ](../../modeling/analyze-models/evaluate/residuals.html)
        * [ ROC Curve tools ](../../modeling/analyze-models/evaluate/roc-curve-tab/index.html) [ ROC Curve tools ](../../modeling/analyze-models/evaluate/roc-curve-tab/index.html)
          * [ Use the ROC Curve tools ](../../modeling/analyze-models/evaluate/roc-curve-tab/roc-curve-tab-use.html)
          * [ Select data and display threshold ](../../modeling/analyze-models/evaluate/roc-curve-tab/threshold.html)
          * [ Confusion matrix ](../../modeling/analyze-models/evaluate/roc-curve-tab/confusion-matrix.html)
          * [ Prediction Distribution graph ](../../modeling/analyze-models/evaluate/roc-curve-tab/pred-dist-graph.html)
          * [ ROC curve ](../../modeling/analyze-models/evaluate/roc-curve-tab/roc-curve.html)
          * [ Profit curve ](../../modeling/analyze-models/evaluate/roc-curve-tab/profit-curve.html)
          * [ Cumulative Charts ](../../modeling/analyze-models/evaluate/roc-curve-tab/cumulative-charts.html)
          * [ Custom charts ](../../modeling/analyze-models/evaluate/roc-curve-tab/custom-charts.html)
          * [ Metrics ](../../modeling/analyze-models/evaluate/roc-curve-tab/metrics.html)
        * [ Series Insights (clustering) ](../../modeling/analyze-models/evaluate/series-insights.html)
        * [ Series Insights (multiseries) ](../../modeling/analyze-models/evaluate/series-insights-multi.html)
        * [ Stability ](../../modeling/analyze-models/evaluate/stability.html)
        * [ Training Dashboard ](../../modeling/analyze-models/evaluate/training-dash.html)
      * [ Understand ](../../modeling/analyze-models/understand/index.html) [ Understand ](../../modeling/analyze-models/understand/index.html)
        * [ Cluster Insights ](../../modeling/analyze-models/understand/cluster-insights.html)
        * [ Feature Effects ](../../modeling/analyze-models/understand/feature-effects.html)
        * [ Feature Impact ](../../modeling/analyze-models/understand/feature-impact.html)
        * [ Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/index.html) [ Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/index.html)
          * [ Prediction Explanations overview ](../../modeling/analyze-models/understand/pred-explain/predex-overview.html)
          * [ SHAP Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/shap-pe.html)
          * [ XEMP Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/xemp-pe.html)
          * [ Text Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/predex-text.html)
          * [ Prediction Explanations for clusters ](../../modeling/analyze-models/understand/pred-explain/cluster-pe.html)
          * [ Prediction Explanations for time-aware projects ](../../modeling/analyze-models/understand/pred-explain/ts-otv-predex.html)
        * [ Word Cloud ](../../modeling/analyze-models/understand/word-cloud.html)
      * [ Describe ](../../modeling/analyze-models/describe/index.html) [ Describe ](../../modeling/analyze-models/describe/index.html)
        * [ Blueprint ](../../modeling/analyze-models/describe/blueprints.html)
        * [ Blueprint JSON ](../../modeling/analyze-models/describe/blueprint-json.html)
        * [ Coefficients (preprocessing) ](../../modeling/analyze-models/describe/coefficients.html)
        * [ Constraints (monotonic) ](../../modeling/analyze-models/describe/monotonic.html)
        * [ Data Quality Handling Report ](../../modeling/analyze-models/describe/dq-report.html)
        * [ Eureqa Models ](../../modeling/analyze-models/describe/eureqa.html)
        * [ Log ](../../modeling/analyze-models/describe/log.html)
        * [ Model Info ](../../modeling/analyze-models/describe/model-info.html)
        * [ Rating Tables ](../../modeling/analyze-models/describe/rating-table.html)
        * [ GA2M output (from Rating Tables) ](../../modeling/analyze-models/describe/ga2m.html)
      * [ Predict ](../../modeling/analyze-models/predictions/index.html) [ Predict ](../../modeling/analyze-models/predictions/index.html)
        * [ Deploy ](../../modeling/analyze-models/predictions/deploy.html)
        * [ Downloads ](../../modeling/analyze-models/predictions/download.html)
        * [ Make Predictions ](../../modeling/analyze-models/predictions/predict.html)
        * [ Portable Predictions ](../../modeling/analyze-models/predictions/port-pred.html)
      * [ Compliance ](../../modeling/analyze-models/compliance/index.html) [ Compliance ](../../modeling/analyze-models/compliance/index.html)
        * [ Model Compliance ](../../modeling/analyze-models/compliance/compliance.html)
        * [ Template Builder for compliance reports ](../../modeling/analyze-models/compliance/template-builder.html)
      * [ Comments ](../../modeling/analyze-models/comments/index.html)
      * [ Bias and Fairness ](../../modeling/analyze-models/bias/index.html) [ Bias and Fairness ](../../modeling/analyze-models/bias/index.html)
        * [ Cross-Class Accuracy ](../../modeling/analyze-models/bias/cross-acc.html)
        * [ Cross-Class Data Disparity ](../../modeling/analyze-models/bias/cross-data.html)
        * [ Per-Class Bias ](../../modeling/analyze-models/bias/per-class.html)
      * [ Other ](../../modeling/analyze-models/other/index.html) [ Other ](../../modeling/analyze-models/other/index.html)
        * [ Bias vs Accuracy ](../../modeling/analyze-models/other/bias-tab.html)
        * [ Insights ](../../modeling/analyze-models/other/analyze-insights.html)
        * [ Learning Curves ](../../modeling/analyze-models/other/learn-curve.html)
        * [ Model Comparison ](../../modeling/analyze-models/other/model-compare.html)
        * [ Speed vs Accuracy ](../../modeling/analyze-models/other/speed.html)
    * [ Specialized workflows ](../../modeling/special-workflows/index.html) [ Specialized workflows ](../../modeling/special-workflows/index.html)
      * [ Bias and Fairness resources ](../../modeling/special-workflows/bias-resources.html)
      * [ Composable ML ](../../modeling/special-workflows/cml/index.html) [ Composable ML ](../../modeling/special-workflows/cml/index.html)
        * [ Composable ML overview ](../../modeling/special-workflows/cml/cml-overview.html)
        * [ Composable ML Quickstart ](../../modeling/special-workflows/cml/cml-quickstart.html)
        * [ Modify a blueprint ](../../modeling/special-workflows/cml/cml-blueprint-edit.html)
        * [ Create custom tasks ](../../modeling/special-workflows/cml/cml-custom-tasks.html)
        * [ Custom environments ](../../modeling/special-workflows/cml/cml-custom-env.html)
        * [ DRUM CLI tool ](../../modeling/special-workflows/cml/cml-drum.html)
        * [ Enable network access for custom tasks ](../../modeling/special-workflows/cml/custom-task-network-access.html)
      * [ Document AI ](../../modeling/special-workflows/doc-ai/index.html) [ Document AI ](../../modeling/special-workflows/doc-ai/index.html)
        * [ Document AI overview ](../../modeling/special-workflows/doc-ai/doc-ai-overview.html)
        * [ Document ingest and modeling ](../../modeling/special-workflows/doc-ai/doc-ai-ingest.html)
        * [ Document AI insights ](../../modeling/special-workflows/doc-ai/doc-ai-insights.html)
        * [ Predictions from documents ](../../modeling/special-workflows/doc-ai/doc-ai-predictions.html)
      * [ Location AI ](../../modeling/special-workflows/location-ai/index.html) [ Location AI ](../../modeling/special-workflows/location-ai/index.html)
        * [ Data ingest ](../../modeling/special-workflows/location-ai/lai-ingest.html)
        * [ Exploratory Spatial Data Analysis (ESDA) ](../../modeling/special-workflows/location-ai/lai-esda.html)
        * [ Modeling ](../../modeling/special-workflows/location-ai/lai-model.html)
        * [ Accuracy Over Space ](../../modeling/special-workflows/location-ai/lai-insights.html)
      * [ Unsupervised learning ](../../modeling/special-workflows/unsupervised/index.html) [ Unsupervised learning ](../../modeling/special-workflows/unsupervised/index.html)
        * [ Anomaly detection ](../../modeling/special-workflows/unsupervised/anomaly-detection.html)
        * [ Clustering ](../../modeling/special-workflows/unsupervised/clustering.html)
      * [ Visual AI ](../../modeling/special-workflows/visual-ai/index.html) [ Visual AI ](../../modeling/special-workflows/visual-ai/index.html)
        * [ Visual AI overview ](../../modeling/special-workflows/visual-ai/vai-overview.html)
        * [ Build Visual AI models ](../../modeling/special-workflows/visual-ai/vai-model.html)
        * [ Train-time image augmentation ](../../modeling/special-workflows/visual-ai/tti-augment/index.html) [ Train-time image augmentation ](../../modeling/special-workflows/visual-ai/tti-augment/index.html)
          * [ About augmented models ](../../modeling/special-workflows/visual-ai/tti-augment/ttia-introduction.html)
          * [ Transformations and lists ](../../modeling/special-workflows/visual-ai/tti-augment/ttia-lists.html)
          * [ Use case examples ](../../modeling/special-workflows/visual-ai/tti-augment/ttia-examples.html)
        * [ Model insights ](../../modeling/special-workflows/visual-ai/vai-insights.html)
        * [ Tune models ](../../modeling/special-workflows/visual-ai/vai-tuning.html)
        * [ Visual AI predictions ](../../modeling/special-workflows/visual-ai/vai-predictions.html)
      * [ Multilabel modeling ](../../modeling/special-workflows/multilabel.html)
      * [ Out-of-time validation modeling ](../../modeling/special-workflows/otv.html)
      * [ Text AI resources ](../../modeling/special-workflows/textai-resources.html)
    * [ Time-series modeling ](../../modeling/time/index.html) [ Time-series modeling ](../../modeling/time/index.html)
      * [ What is time-aware modeling? ](../../modeling/time/whatis-time.html)
      * [ Time series modeling ](../../modeling/time/ts-flow-overview.html)
      * [ Time series insights ](../../modeling/time/ts-leaderboard.html)
      * [ Time series predictions ](../../modeling/time/ts-predictions.html)
      * [ Time series portable predictions with prediction intervals ](../../modeling/time/ts-port-pred-intervals.html)
      * [ Multiseries modeling ](../../modeling/time/multiseries.html)
      * [ Clustering ](../../modeling/time/ts-clustering.html)
      * [ Segmented modeling ](../../modeling/time/ts-segmented.html)
      * [ Nowcasting ](../../modeling/time/nowcasting.html)
      * [ External prediction comparison ](../../modeling/time/cyob.html)
      * [ Batch predictions for TTS and LSTM models ](../../modeling/time/ts-tts-lstm-batch-pred.html)
      * [ Time series advanced modeling ](../../modeling/time/ts-adv-modeling/index.html) [ Time series advanced modeling ](../../modeling/time/ts-adv-modeling/index.html)
        * [ Time series advanced options ](../../modeling/time/ts-adv-modeling/ts-adv-opt.html)
        * [ Clustering advanced options ](../../modeling/time/ts-adv-modeling/ts-cluster-adv-opt.html)
        * [ Date/time partitioning advanced options ](../../modeling/time/ts-adv-modeling/ts-date-time.html)
        * [ Customizing time series projects ](../../modeling/time/ts-adv-modeling/ts-customization.html)
      * [ Time series modeling data ](../../modeling/time/ts-modeling-data/index.html) [ Time series modeling data ](../../modeling/time/ts-modeling-data/index.html)
        * [ Create the modeling dataset ](../../modeling/time/ts-modeling-data/ts-create-data.html)
        * [ Data prep for time series ](../../modeling/time/ts-modeling-data/ts-data-prep.html)
        * [ Restore features removed by reduction ](../../modeling/time/ts-modeling-data/restore-features.html)
    * [ AutoML preview features ](../../modeling/automl-preview/index.html) [ AutoML preview features ](../../modeling/automl-preview/index.html)
      * [ Quantile regression analysis ](../../modeling/automl-preview/quantile-reg.html)
      * [ Configure hyperparameters for custom tasks ](../../modeling/automl-preview/cml-hyperparam.html)
    * [ Modeling FAQ ](../../modeling/general-modeling-faq.html)
    * [ Value Tracker ](../../modeling/value-tracker.html)
    * [ Project control center ](../../modeling/manage-projects.html)
  * [ Predictions ](../../predictions/index.html) [ Predictions ](../../predictions/index.html)
    * [ Real-time scoring methods ](../../predictions/realtime/index.html) [ Real-time scoring methods ](../../predictions/realtime/index.html)
      * [ Prediction API snippets ](../../predictions/realtime/code-py.html)
      * [ Qlik predictions ](../../predictions/realtime/integration-code-snippets.html)
    * [ Batch prediction methods ](../../predictions/batch/index.html) [ Batch prediction methods ](../../predictions/batch/index.html)
      * [ Batch prediction UI ](../../predictions/batch/batch-dep/index.html) [ Batch prediction UI ](../../predictions/batch/batch-dep/index.html)
        * [ Make a one-time batch prediction ](../../predictions/batch/batch-dep/batch-pred.html)
        * [ Schedule recurring batch prediction jobs ](../../predictions/batch/batch-dep/batch-pred-jobs.html)
        * [ Manage prediction job definitions ](../../predictions/batch/batch-dep/manage-pred-job-def.html)
        * [ Snowflake prediction job examples ](../../predictions/batch/batch-dep/pred-job-examples-snowflake.html)
      * [ Prediction monitoring jobs ](../../predictions/batch/pred-monitoring-jobs/index.html) [ Prediction monitoring jobs ](../../predictions/batch/pred-monitoring-jobs/index.html)
        * [ Create monitoring jobs ](../../predictions/batch/pred-monitoring-jobs/ui-monitoring-jobs.html)
        * [ Monitoring jobs API ](../../predictions/batch/pred-monitoring-jobs/api-monitoring-jobs.html)
        * [ Manage monitoring job definitions ](../../predictions/batch/pred-monitoring-jobs/manage-monitoring-job-def.html)
      * [ Manage batch jobs ](../../predictions/batch/batch-jobs.html)
      * [ Batch prediction scripts ](../../predictions/batch/cli-scripts.html)
    * [ Portable prediction methods ](../../predictions/port-pred/index.html) [ Portable prediction methods ](../../predictions/port-pred/index.html)
      * [ Scoring Code ](../../predictions/port-pred/scoring-code/index.html) [ Scoring Code ](../../predictions/port-pred/scoring-code/index.html)
        * [ Download Scoring Code from the Leaderboard ](../../predictions/port-pred/scoring-code/sc-download-leaderboard.html)
        * [ Download Scoring Code from a deployment ](../../predictions/port-pred/scoring-code/sc-download-deployment.html)
        * [ Download Scoring Code from the Leaderboard (Legacy) ](../../predictions/port-pred/scoring-code/sc-download-legacy.html)
        * [ Scoring Code for time series projects ](../../predictions/port-pred/scoring-code/sc-time-series.html)
        * [ Scoring at the command line ](../../predictions/port-pred/scoring-code/scoring-cli.html)
        * [ Scoring Code usage examples ](../../predictions/port-pred/scoring-code/quickstart-api.html)
        * [ JAR structure ](../../predictions/port-pred/scoring-code/jar-package.html)
        * [ Generate Java models in an existing project ](../../predictions/port-pred/scoring-code/build-verify.html)
        * [ Backward-compatible Java API ](../../predictions/port-pred/scoring-code/java-back-compat.html)
        * [ Scoring Code JAR integrations ](../../predictions/port-pred/scoring-code/sc-jar-integrations.html)
        * [ Android integration ](../../predictions/port-pred/scoring-code/android.html)
      * [ Portable Prediction Server ](../../predictions/port-pred/pps/index.html) [ Portable Prediction Server ](../../predictions/port-pred/pps/index.html)
        * [ Portable Prediction Server configuration ](../../predictions/port-pred/pps/portable-pps.html)
        * [ Portable Prediction Server running modes ](../../predictions/port-pred/pps/pps-run-modes.html)
        * [ Portable batch predictions ](../../predictions/port-pred/pps/portable-batch-predictions.html)
        * [ Custom model Portable Prediction Server ](../../predictions/port-pred/pps/custom-pps.html)
      * [ DataRobot Prime (deprecated) ](../../predictions/port-pred/prime/index.html)
    * [ Predictions testing ](../../predictions/pred-test.html)
    * [ Predictions reference ](../../predictions/pred-file-limits.html)
  * [ MLOps ](../../mlops/index.html) [ MLOps ](../../mlops/index.html)
    * [ Deployment ](../../mlops/deployment/index.html) [ Deployment ](../../mlops/deployment/index.html)
      * [ Deployment workflows ](../../mlops/deployment/deploy-workflows/index.html) [ Deployment workflows ](../../mlops/deployment/deploy-workflows/index.html)
        * [ DataRobot model in a DataRobot environment ](../../mlops/deployment/deploy-workflows/dr-model-dr-env.html)
        * [ DataRobot model in a PPS ](../../mlops/deployment/deploy-workflows/dr-model-pps-env.html)
        * [ Custom model in a DataRobot environment ](../../mlops/deployment/deploy-workflows/cus-model-dr-env.html)
        * [ Custom model in a PPS ](../../mlops/deployment/deploy-workflows/cus-model-pps-env.html)
        * [ Scoring Code in an external environment ](../../mlops/deployment/deploy-workflows/ext-dr-model-ext-env.html)
        * [ Monitor an external model with the monitoring agent ](../../mlops/deployment/deploy-workflows/ext-cus-model-ext-env.html)
      * [ Register models ](../../mlops/deployment/registry/index.html) [ Register models ](../../mlops/deployment/registry/index.html)
        * [ Model Registry ](../../mlops/deployment/registry/reg-create.html)
        * [ Register DataRobot models ](../../mlops/deployment/registry/dr-model-reg.html)
        * [ Register custom models ](../../mlops/deployment/registry/reg-custom-models.html)
        * [ Register external models ](../../mlops/deployment/registry/reg-external-models.html)
        * [ Deploy registered models ](../../mlops/deployment/registry/reg-deploy.html)
        * [ View and manage registered models ](../../mlops/deployment/registry/reg-action.html)
        * [ Generate model compliance documentation ](../../mlops/deployment/registry/reg-compliance.html)
        * [ Extend compliance documentation with key values ](../../mlops/deployment/registry/reg-key-values.html)
        * [ Custom jobs ](../../mlops/deployment/registry/reg-custom-jobs.html)
        * [ Import model packages into MLOps ](../../mlops/deployment/registry/reg-transfer.html)
        * [ Model logs for model packages (legacy) ](../../mlops/deployment/registry/reg-model-pkg-logs.html)
      * [ Prepare custom models for deployment ](../../mlops/deployment/custom-models/index.html) [ Prepare custom models for deployment ](../../mlops/deployment/custom-models/index.html)
        * [ Custom Model Workshop ](../../mlops/deployment/custom-models/custom-model-workshop/index.html) [ Custom Model Workshop ](../../mlops/deployment/custom-models/custom-model-workshop/index.html)
          * [ Create custom inference models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-inf-model.html)
          * [ Manage custom model dependencies ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-dependencies.html)
          * [ Manage custom model resources ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-resource-mgmt.html)
          * [ Add custom model versions ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-versions.html)
          * [ Add training data to a custom model ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-training-data.html)
          * [ Add files from remote repos to custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-repos.html)
          * [ Test custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-test.html)
          * [ Manage custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-actions.html)
          * [ Register custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-reg.html)
          * [ Create custom model proxies for external models ](../../mlops/deployment/custom-models/custom-model-workshop/ext-model-proxy.html)
          * [ GitHub Actions for custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-github-action.html)
        * [ Custom model environments ](../../mlops/deployment/custom-models/custom-model-environments/index.html) [ Custom model environments ](../../mlops/deployment/custom-models/custom-model-environments/index.html)
          * [ Drop-in environments ](../../mlops/deployment/custom-models/custom-model-environments/drop-in-environments.html)
          * [ Custom environments ](../../mlops/deployment/custom-models/custom-model-environments/custom-environments.html)
      * [ Prepare for external model deployment ](../../mlops/deployment/ext-model-prep/index.html) [ Prepare for external model deployment ](../../mlops/deployment/ext-model-prep/index.html)
        * [ Add external prediction environments ](../../mlops/deployment/ext-model-prep/ext-pred-env.html)
        * [ Manage prediction environments ](../../mlops/deployment/ext-model-prep/ext-pred-env-manage.html)
        * [ Register external models ](../../mlops/deployment/ext-model-prep/ext-model-reg.html)
      * [ Manage prediction environments ](../../mlops/deployment/prediction-env/index.html) [ Manage prediction environments ](../../mlops/deployment/prediction-env/index.html)
        * [ Add DataRobot Serverless prediction environments ](../../mlops/deployment/prediction-env/pred-env.html)
        * [ Add external prediction environments ](../../mlops/deployment/prediction-env/ext-pred-env.html)
        * [ Manage prediction environments ](../../mlops/deployment/prediction-env/pred-env-manage.html)
        * [ Deploy a model to a prediction environment ](../../mlops/deployment/prediction-env/pred-env-deploy.html)
        * [ Prediction environment integrations ](../../mlops/deployment/prediction-env/pred-env-integrations/index.html) [ Prediction environment integrations ](../../mlops/deployment/prediction-env/pred-env-integrations/index.html)
          * [ Automated deployment and replacement of Scoring Code in AzureML ](../../mlops/deployment/prediction-env/pred-env-integrations/azureml-sc-deploy-replace.html)
          * [ Automated deployment and replacement in Sagemaker ](../../mlops/deployment/prediction-env/pred-env-integrations/sagemaker-cm-deploy-replace.html)
      * [ Deploy models ](../../mlops/deployment/deploy-methods/index.html) [ Deploy models ](../../mlops/deployment/deploy-methods/index.html)
        * [ Deploy DataRobot models ](../../mlops/deployment/deploy-methods/deploy-model.html)
        * [ Deploy custom models ](../../mlops/deployment/deploy-methods/deploy-custom-inf-model.html)
        * [ Deploy external models ](../../mlops/deployment/deploy-methods/deploy-external-model.html)
        * [ Configure deployment settings ](../../mlops/deployment/deploy-methods/add-deploy-info.html)
        * [ Add prediction data post-deployment ](../../mlops/deployment/deploy-methods/add-prediction-data-post-deploy.html)
      * [ MLOps agents ](../../mlops/deployment/mlops-agent/index.html) [ MLOps agents ](../../mlops/deployment/mlops-agent/index.html)
        * [ Monitoring agent ](../../mlops/deployment/mlops-agent/monitoring-agent/index.html) [ Monitoring agent ](../../mlops/deployment/mlops-agent/monitoring-agent/index.html)
          * [ Installation and configuration ](../../mlops/deployment/mlops-agent/monitoring-agent/agent.html)
          * [ Examples directory ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-ex.html)
          * [ Monitoring agent use cases ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-use.html)
          * [ Environment variables ](../../mlops/deployment/mlops-agent/monitoring-agent/env-var.html)
          * [ Library and agent spooler configuration ](../../mlops/deployment/mlops-agent/monitoring-agent/spooler.html)
          * [ Download Scoring Code ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-sc.html)
          * [ Monitoring external multiclass deployments ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-multi.html)
        * [ Management agent ](../../mlops/deployment/mlops-agent/mgmt-agent/index.html) [ Management agent ](../../mlops/deployment/mlops-agent/mgmt-agent/index.html)
          * [ Installation and configuration ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-install.html)
          * [ Configure environment plugins ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-plugins.html)
          * [ Install the management agent for Kubernetes ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-kubernetes.html)
          * [ Management agent deployment status and events ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-events-status.html)
          * [ Relaunch deployments ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-relaunch.html)
          * [ Force delete deployments ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-delete.html)
        * [ Agent event log ](../../mlops/deployment/mlops-agent/agent-event-log.html)
    * [ Deployment settings ](../../mlops/deployment-settings/index.html) [ Deployment settings ](../../mlops/deployment-settings/index.html)
      * [ Set up service health monitoring ](../../mlops/deployment-settings/service-health-settings.html)
      * [ Set up data drift monitoring ](../../mlops/deployment-settings/data-drift-settings.html)
      * [ Set up accuracy monitoring ](../../mlops/deployment-settings/accuracy-settings.html)
      * [ Set up fairness monitoring ](../../mlops/deployment-settings/fairness-settings.html)
      * [ Set up humility rules ](../../mlops/deployment-settings/humility-settings.html)
      * [ Configure retraining ](../../mlops/deployment-settings/retraining-settings.html)
      * [ Configure challengers ](../../mlops/deployment-settings/challengers-settings.html)
      * [ Configure predictions settings ](../../mlops/deployment-settings/predictions-settings.html)
      * [ Enable data exploration ](../../mlops/deployment-settings/data-exploration-settings.html)
      * [ Set up custom metrics monitoring ](../../mlops/deployment-settings/custom-metrics-settings.html)
      * [ Set up timeliness tracking ](../../mlops/deployment-settings/usage-settings.html)
    * [ Lifecycle management ](../../mlops/manage-mlops/index.html) [ Lifecycle management ](../../mlops/manage-mlops/index.html)
      * [ Deployment inventory ](../../mlops/manage-mlops/deploy-inventory.html)
      * [ Manage deployments ](../../mlops/manage-mlops/actions-menu.html)
      * [ Replace deployed models ](../../mlops/manage-mlops/deploy-replace.html)
      * [ Manage Automated Retraining policies ](../../mlops/manage-mlops/set-up-auto-retraining.html)
    * [ Performance monitoring ](../../mlops/monitor/index.html) [ Performance monitoring ](../../mlops/monitor/index.html)
      * [ Overview tab ](../../mlops/monitor/dep-overview.html)
      * [ Accuracy tab ](../../mlops/monitor/deploy-accuracy.html)
      * [ Data Drift tab ](../../mlops/monitor/data-drift.html)
      * [ Service Health tab ](../../mlops/monitor/service-health.html)
      * [ Challengers tab ](../../mlops/monitor/challengers.html)
      * [ Usage tab ](../../mlops/monitor/deploy-usage.html)
      * [ Data Exploration tab ](../../mlops/monitor/data-exploration.html)
      * [ Custom Metrics tab ](../../mlops/monitor/custom-metrics.html)
      * [ Segmented analysis ](../../mlops/monitor/deploy-segment.html)
      * [ Batch monitoring ](../../mlops/monitor/deploy-batch-monitor.html)
      * [ Generative model monitoring ](../../mlops/monitor/generative-model-monitoring.html)
    * [ Governance ](../../mlops/governance/index.html) [ Governance ](../../mlops/governance/index.html)
      * [ Model deployment approval workflow ](../../mlops/governance/dep-admin.html)
      * [ Governance lens ](../../mlops/governance/gov-lens.html)
      * [ Notifications tab ](../../mlops/governance/deploy-notifications.html)
      * [ Humility tab ](../../mlops/governance/humble.html)
      * [ Fairness tab ](../../mlops/governance/mlops-fairness.html)
      * [ Deployment reports ](../../mlops/governance/deploy-reports.html)
    * [ MLOps preview features ](../../mlops/mlops-preview/index.html) [ MLOps preview features ](../../mlops/mlops-preview/index.html)
      * [ Service Health and Accuracy history ](../../mlops/mlops-preview/pp-deploy-history.html)
      * [ Automated deployment and replacement of Scoring Code in Snowflake ](../../mlops/mlops-preview/pp-snowflake-sc-deploy-replace.html)
      * [ Run the monitoring agent in DataRobot ](../../mlops/mlops-preview/monitoring-agent-in-dr.html)
      * [ Feature cache for Feature Discovery deployments ](../../mlops/mlops-preview/safer-ft-cache.html)
      * [ MLOps reporting for unstructured models ](../../mlops/mlops-preview/mlops-unstructured-models.html)
    * [ MLOps FAQ ](../../mlops/mlops-faq.html)
  * [ Notebooks ](../../dr-notebooks/index.html) [ Notebooks ](../../dr-notebooks/index.html)
    * [ Manage notebooks ](../../dr-notebooks/manage-nb/index.html) [ Manage notebooks ](../../dr-notebooks/manage-nb/index.html)
      * [ Add notebooks ](../../dr-notebooks/manage-nb/dr-create-nb.html)
      * [ Notebook settings ](../../dr-notebooks/manage-nb/dr-settings-nb.html)
      * [ Notebook versioning ](../../dr-notebooks/manage-nb/dr-revise-nb.html)
    * [ Notebook coding experience ](../../dr-notebooks/code-nb/index.html) [ Notebook coding experience ](../../dr-notebooks/code-nb/index.html)
      * [ Environment management ](../../dr-notebooks/code-nb/dr-env-nb.html)
      * [ Create and execute cells ](../../dr-notebooks/code-nb/dr-cell-nb.html)
      * [ Cell actions ](../../dr-notebooks/code-nb/dr-action-nb.html)
      * [ Code intelligence ](../../dr-notebooks/code-nb/dr-code-int.html)
      * [ Notebook terminals ](../../dr-notebooks/code-nb/dr-terminal-nb.html)
      * [ Azure OpenAI Service integration ](../../dr-notebooks/code-nb/dr-openai-nb.html)
    * [ Notebook reference ](../../dr-notebooks/dr-notebook-ref.html)
  * [ AI Apps ](../../app-builder/index.html) [ AI Apps ](../../app-builder/index.html)
    * [ Create applications ](../../app-builder/create-app.html)
    * [ Manage applications ](../../app-builder/current-app.html)
    * [ Edit no-code applications ](../../app-builder/edit-apps/index.html) [ Edit no-code applications ](../../app-builder/edit-apps/index.html)
      * [ Pages ](../../app-builder/edit-apps/app-pages.html)
      * [ Widgets ](../../app-builder/edit-apps/app-widgets.html)
      * [ What-if and Optimizer ](../../app-builder/edit-apps/whatif-opt.html)
      * [ Settings ](../../app-builder/edit-apps/app-settings.html)
    * [ Use no-code applications ](../../app-builder/use-apps/index.html) [ Use no-code applications ](../../app-builder/use-apps/index.html)
      * [ Make predictions ](../../app-builder/use-apps/app-make-pred.html)
      * [ View prediction results ](../../app-builder/use-apps/app-analyze-result.html)
    * [ Time series applications ](../../app-builder/ts-app.html)
    * [ Custom apps ](../../app-builder/custom-apps/index.html) [ Custom apps ](../../app-builder/custom-apps/index.html)
      * [ Upload custom applications ](../../app-builder/custom-apps/app-upload-custom.html)
      * [ Host custom applications ](../../app-builder/custom-apps/custom-apps-hosting.html)
      * [ Manage custom applications ](../../app-builder/custom-apps/manage-custom-apps.html)
    * [ AI App reference ](../../app-builder/reference/index.html) [ AI App reference ](../../app-builder/reference/index.html)
      * [ Default widgets ](../../app-builder/reference/default-widgets.html)
      * [ Optional widgets ](../../app-builder/reference/optional-widgets.html)
    * [ AI App preview features ](../../app-builder/app-preview/index.html) [ AI App preview features ](../../app-builder/app-preview/index.html)
      * [ Prefill application templates ](../../app-builder/app-preview/app-prefill.html)
      * [ Feature Discovery support in No-Code AI Apps ](../../app-builder/app-preview/app-ft-cache.html)
  * [ Integrations ](../index.html) [ Integrations ](../index.html)
    * [ AWS ](index.html) [ AWS ](index.html)
      * [ Import data from AWS S3 ](import-from-aws-s3.html)
      * [ Deploy models on AWS EKS ](deploy-dr-models-on-aws.html) [ Deploy models on AWS EKS ](deploy-dr-models-on-aws.html)

[For Self-Managed AI Platform users running v11.1, see the on-premise platform
documentation __](/11.1/en/docs/index.html)

Deploy models on AWS EKS

        * Before you start 
          * Install and configure AWS and EKS 
        * Deploy models to EKS 
          * Configure and run the PPS Docker image 
          * Push the Docker image to Amazon ECR 
          * Create an Amazon EKS cluster 
          * Deploy the MLOps package to Kubernetes 
          * Set up horizontal pod autoscaling 
          * Expose your model to the world (load balancing) 
          * Clean up 
        * Wrap-up 

      * [ Path-based routing to PPS ](path-based-routing-to-pps-on-aws.html)
      * [ Score Snowflake data on AWS EMR Spark ](score-snowflake-aws-emr-spark.html)
      * [ Ingest data with AWS Athena ](ingest-athena.html)
      * [ AWS Lambda ](lambda/index.html) [ AWS Lambda ](lambda/index.html)
        * [ AWS Lambda reporting to MLOps ](lambda/aws-lambda-reporting-to-mlops.html)
        * [ Use DataRobot Prime models with AWS Lambda ](lambda/prime-lambda.html)
        * [ Use Scoring Code with AWS Lambda ](lambda/sc-lambda.html)
      * [ Amazon SageMaker ](sagemaker/index.html) [ Amazon SageMaker ](sagemaker/index.html)
        * [ Deploy models on SageMaker ](sagemaker/sagemaker-deploy.html)
        * [ Use Scoring Code with AWS SageMaker ](sagemaker/sc-sagemaker.html)
    * [ Azure ](../azure/index.html) [ Azure ](../azure/index.html)
      * [ Run Batch Prediction jobs from Azure Blob Storage ](../azure/azure-blob-storage-batch-pred.html)
      * [ Deploy and monitor DataRobot models in Azure Kubernetes Service ](../azure/aks-deploy-and-monitor.html)
      * [ Deploy and monitor Spark models with DataRobot MLOps ](../azure/spark-deploy-and-monitor.html)
      * [ Deploy and monitor ML.NET models with DataRobot MLOps ](../azure/mlnet-deploy-and-monitor.html)
      * [ Use Scoring Code with Azure ML ](../azure/sc-azureml.html)
    * [ Google ](../google/index.html) [ Google ](../google/index.html)
      * [ Deploy and monitor models on GCP ](../google/google-cloud-platform.html)
      * [ Deploy the MLOps agent on GKE ](../google/mlops-agent-with-gke.html)
    * [ Snowflake ](../snowflake/index.html) [ Snowflake ](../snowflake/index.html)
      * [ Data ingest and project creation ](../snowflake/sf-project-creation.html)
      * [ Real-time predictions ](../snowflake/sf-client-scoring.html)
      * [ Server-side model scoring ](../snowflake/sf-server-scoring.html)
      * [ Snowflake external functions and streams ](../snowflake/sf-function-streams.html)
      * [ Generate Snowflake UDF Scoring Code ](../snowflake/snowflake-sc.html)

[For Self-Managed AI Platform users running v11.1, see the on-premise platform
documentation __](/11.1/en/docs/index.html)

Deploy models on AWS EKS

  * Before you start 
    * Install and configure AWS and EKS 
  * Deploy models to EKS 
    * Configure and run the PPS Docker image 
    * Push the Docker image to Amazon ECR 
    * Create an Amazon EKS cluster 
    * Deploy the MLOps package to Kubernetes 
    * Set up horizontal pod autoscaling 
    * Expose your model to the world (load balancing) 
    * Clean up 
  * Wrap-up 

[Integrations](../index.html "Integrations") > [AWS](index.html "AWS") >
Deploy models on AWS EKS

# Deploy models on AWS EKS¶

With DataRobot MLOps, you can deploy DataRobot models into your own AWS
Elastic Kubernetes Service (EKS) clusters and still have the advantages of
using the [monitoring](../../mlops/monitor/index.html) and
[governance](../../mlops/governance/index.html) capabilities of MLOps.

These exportable DataRobot models are known as [Portable Prediction Servers
(PPSs)](../../reference/glossary/index.html#portable-prediction-server-pps).
The models are embedded into Docker containers, providing flexibility and
portability, and making them suitable for container orchestration tools such
as Kubernetes.

The following steps show how to deploy a DataRobot model on EKS.

## Before you start¶

Availability information

To deploy a DataRobot model on EKS, you need to export a model package which
requires the "Enable MMM model package export" flag. Contact your DataRobot
representative for more information about enabling this feature.

Before deploying to Amazon EKS, you need to create an EKS cluster. There are
two approaches to spin up the cluster:

  * Using the **eksctl** tool (CLI for Amazon EKS). This is the simplest and fastest way to create an EKS cluster.

  * Using AWS Management Console. This method provides more fine-grained tuning (for example, IAM role and VPC creation).

This topic shows how to install using the **eksctl** tool. See [Getting
started with Amazon EKS –
eksctl](https://docs.aws.amazon.com/eks/latest/userguide/getting-started-
eksctl.html) for detailed instructions.

If any of the tools are already installed and configured, you can skip the
corresponding steps.

### Install and configure AWS and EKS¶

Follow the steps described below to install and configure Amazon Web Services
CLI, EKS, and Kubernetes CLI.

  1. Install the AWS CLI, version 2. 

`aws --version`

  2. Configure your AWS CLI credentials.

  3. Install **eksctl**.

`eksctl version`

  4. Install and configure **kubectl** (CLI for Kubernetes clusters).

`kubectl version --short --client`

## Deploy models to EKS¶

Deploying DataRobot models on a Kubernetes infrastructure consists of three
main activities:

  * Preparing and pushing the Docker container with the MLOps package to the container registry
  * Creating the external deployment in DataRobot
  * Creating the Kubernetes cluster

### Configure and run the PPS Docker image¶

To complete the following steps, you need to first generate your model and
[create an MLOps model package](../../mlops/deployment/registry/reg-
create.html).

DataRobot provides a UI to help you configure the Portable Prediction Server
and create the Docker image. Follow these steps:

  1. [Configure the Portable Prediction Server (PPS)](../../predictions/port-pred/pps/portable-pps.html#configure-the-portable-prediction-server).
  2. [Obtain the PPS Docker image](../../predictions/port-pred/pps/portable-pps.html#obtain-the-pps-docker-image).
  3. [Load the image to Docker](../../predictions/port-pred/pps/portable-pps.html#load-the-image-to-docker).
  4. [Download the model package](../../predictions/port-pred/pps/portable-pps.html#deployment-download).
  5. [Run your Docker image](../../predictions/port-pred/pps/portable-pps.html#running-modes).
  6. [Monitor your model](../../predictions/port-pred/pps/portable-pps.html#monitoring).
  7. [Create an external deployment](../../mlops/deployment/deploy-methods/deploy-external-model.html). When you create the deployment, make note of the MLOps model ID and the MLOps deployment ID. You’re going to need these IDs when you deploy the MLOps package to Kubernetes.

### Push the Docker image to Amazon ECR¶

You need to upload the container image to Amazon Elastic Container Registry
(ECR) so that your Amazon EKS cluster can download and run it.

  1. Configure the Docker CLI tool to authenticate to Elastic Container Registry:
         
         aws ecr get-login-password --region us-east-1 | docker login --username XXX --password-stdin 00000000000.xxx.ecr.us-east-1.amazonaws.com
         

  2. Push the Docker image you just built to ECR:
         
         docker push 00000000000.xxx.ecr.us-east-1.amazonaws.com/house-regression-model:latest
         

### Create an Amazon EKS cluster¶

Now that the Docker image is stored in ECR and the external deployment is
created, you can spin up an Amazon EKS cluster. The EKS cluster needs VPC with
either of the following:

  * Two public subnets and two private subnets
  * A VPC with three public subnets

The Amazon EKS requires subnets in at least two Availability Zones. A VPC with
public and private subnets is recommended so that Kubernetes can create public
load balancers in the public subnets to control traffic to the pods that run
on nodes in private subnets.

To create the Amazon EKS cluster:

  1. (Optional) Create or choose two public and two private subnets in your VPC. Make sure that “Auto-assign public IPv4 address” is enabled for the public subnets.

Note

The **eksctl** tool creates all necessary subnets behind the scenes if you
don’t provide the corresponding `--vpc-private-subnets` and `--vpc-public-
subnets` parameters.

  2. Create the cluster:
         
         eksctl create cluster \
         --name house-regression \
         --ssh-access \
         --ssh-public-key my-public-key.pub \
         --managed
         

Notes

     * Usage of the `--managed` parameter enables [Amazon EKS-managed nodegroups](https://docs.aws.amazon.com/eks/latest/userguide/managed-node-groups.html). This feature automates the provisioning and lifecycle management of nodes (EC2 instances) for Amazon EKS Kubernetes clusters. You can provision optimized groups of nodes for their clusters. EKS will keep their nodes up-to-date with the latest Kubernetes and host OS versions. The **eksctl** tool makes it possible to choose the specific size and instance type family via command line flags or config files.

     * Although `--ssh-public-key` is optional, it is highly recommended that you specify it when you create your node group with a cluster. This option enables SSH access to the nodes in your managed node group. Enabling SSH access allows you to connect to your instances and gather diagnostic information if there are issues. You cannot enable remote access after the node group is created.

Cluster provisioning usually takes between 10 and 15 minutes and results in
the following:

[![](../../images/int_damdmoa_large_009.png)](../../images/int_damdmoa_large_009.png)

  3. When your cluster is ready, test that your kubectl configuration is correct:
         
         kubectl get svc
         

[![](../../images/int_damdmoa_large_020.png)](../../images/int_damdmoa_large_020.png)

### Deploy the MLOps package to Kubernetes¶

To deploy the MLOps package to Kubernetes:

  1. Create a Kubernetes namespace, for example:
         
         kubectl create namespace house-regression-namespace
         

  2. Save the following contents to a `yaml` file on your local machine (in this case, `house-regression-service.yaml`), replacing the values for your project. Provide the values of **image** , **DataRobot API token** , **model ID** , and **deployment ID**. (You should have saved the IDs when you [created the external deployment in MLOps](../../mlops/deployment/deploy-methods/deploy-external-model.html).)
         
         apiVersion: v1
         kind: Service
         metadata:
           name: house-regression-service
           namespace: house-regression-namespace
           labels:
             app: house-regression-app
         spec:
           selector:
             app: house-regression-app
           ports:
             - protocol: TCP
               port: 80
               targetPort: 8080
         ---
         apiVersion: apps/v1
         kind: Deployment
         metadata:
           name: house-regression-deployment
           namespace: house-regression-namespace
           labels:
             app: house-regression-app
         spec:
           replicas: 3
           selector:
             matchLabels:
               app: house-regression-app
           template:
             metadata:
               labels:
                 app: house-regression-app
             spec:
               affinity:
                 nodeAffinity:
                   requiredDuringSchedulingIgnoredDuringExecution:
                     nodeSelectorTerms:
                     - matchExpressions:
                       - key: beta.kubernetes.io/arch
                         operator: In
                         values:
                         - amd64
               containers:
               - name: house-regression-model
                 image: <your_aws_account_endpoint>.ecr.us-east-1.amazonaws.com/house-regression-model:latest
                 env:
                 - name: PORTABLE_PREDICTION_API_WORKERS_NUMBER
                   value: "2"
                 - name: PORTABLE_PREDICTION_API_MONITORING_ACTIVE
                   value: "True"
                 - name: PORTABLE_PREDICTION_API_MONITORING_SETTINGS
                   value: spooler_type=filesystem;directory=/tmp;max_files=50;file_max_size=10240000;model_id=<your mlops_model_id_obtained_at_step_5>;deployment_id=<your mlops_deployment_id_obtained_at_step_5>
                 - name: MONITORING_AGENT
                   value: "True"
                 - name: MONITORING_AGENT_DATAROBOT_APP_URL
                   value: https://app.datarobot.com/
                 - name: MONITORING_AGENT_DATAROBOT_APP_TOKEN
                   value: <your_datarobot_api_token>
                 ports:
                 - containerPort: 80
         

  3. Create a Kubernetes service and deployment:
         
         kubectl apply -f house-regression-service.yaml
         

  4. View all resources that exist in the namespace:
         
         kubectl get all -n house-regression-namespace
         

[![](../../images/int_damdmoa_large_018.png)](../../images/int_damdmoa_large_018.png)

### Set up horizontal pod autoscaling¶

The Kubernetes Horizontal Pod Autoscaler automatically scales the number of
pods in a deployment, replication controller, or replica set based on that
resource's CPU utilization. This can help your applications scale up to meet
increased demand or scale back when resources are not needed, thus freeing up
your nodes for other applications. When you set a target CPU utilization
percentage, the Horizontal Pod Autoscaler scales your application up or back
to try to meet that target.

  1. Create a Horizontal Pod Autoscaler resource for the php-apache deployment.
         
         kubectl autoscale deployment house-regression-deployment -n house-regression-namespace --cpu-percent=80 --min=1 --max=5
         

  2. View all resources that exist in the namespace.
         
         kubectl get all -n house-regression-namespace
         

Horizontal Pod Autoscaler appears in the resources list.

[![](../../images/int_damdmoa_large_012.png)](../../images/int_damdmoa_large_012.png)

### Expose your model to the world (load balancing)¶

Amazon EKS supports the Network Load Balancer and the Classic Load Balancer
for pods running on Amazon EC2 instance nodes through the Kubernetes service
of type LoadBalancer.

  1. Tag the public subnets in your VPC so that Kubernetes knows to use only those subnets for external load balancers instead of choosing a public subnet in each Availability Zone (in lexicographical order by subnet ID):
         
         kubernetes.io/role/elb = 1
         

  2. Tag the private subnets in the following way so that Kubernetes knows it can use the subnets for internal load balancers.
         
         kubernetes.io/role/internal-elb = 1
         

Important

If you use an Amazon EKS AWS CloudFormation template to create your VPC after
March 26, 2020, then the subnets created by the template are tagged when
they're created as explained
[here](https://docs.aws.amazon.com/eks/latest/userguide/load-balancing.html).

  3. Use the kubectl `expose` command to generate a Kubernetes service for the deployment.
         
         kubectl expose deployment house-regression-deployment -n house-regression-namespace --name=house-regression-external --type=LoadBalancer --port 80 --target-port 8080
         

     * `--port` is the port number configured on the Load Balancer.
     * `--target-port` is the port number that the deployment container is listening on.
  4. Run the following command to get the service details:
         
         kubectl get service -n house-regression-namespace
         

[![](../../images/int_damdmoa_large_010.png)](../../images/int_damdmoa_large_010.png)

  5. Copy the `EXTERNAL_IP` address.

  6. Score your model using the `EXTERNAL_IP` address:
         
         curl -X POST http://<EXTERNAL_IP>/predictions -H "Content-Type: text/csv" --data-binary @kaggle_house_test_dataset.csv
         

[![](../../images/int_damdmoa_large_003.png)](../../images/int_damdmoa_large_003.png)

  7. Check the service health of [the external deployment you created](../../mlops/deployment/deploy-methods/deploy-external-model.html). The scoring request is now included in the statistics.

[![](../../images/int_damdmoa_large_008.png)](../../images/int_damdmoa_large_008.png)

### Clean up¶

  1. Remove the sample service, deployment, pods, and namespace:
         
         kubectl delete namespace house-regression-namespace
         

  2. Delete the cluster:
         
         eksctl delete cluster --name house-regression
         

[![](../../images/int_damdmoa_large_004.png)](../../images/int_damdmoa_large_004.png)

## Wrap-up¶

This walkthrough described how to deploy and monitor DataRobot models on the
Amazon EKS platform via a Portable Prediction Server (PPS). A PPS is embedded
into Docker containers alongside the MLOps agents, making it possible to
acquire the principal IT (service health, number of requests, etc.) and ML
(accuracy, data drift etc.) metrics in the cloud and monitor them on the
centralized DataRobot MLOps dashboard.

Using DataRobot PPSs allows you to avoid vendor lock-in and easily migrate
between cloud environments or deploy models across them simultaneously.

Back to top

