[ DataRobot docs ](../../index.html "DataRobot docs")

  * [ Data ](../../data/index.html) [ Data ](../../data/index.html)
    * [ Data connections ](../../data/connect-data/index.html) [ Data connections ](../../data/connect-data/index.html)
      * [ Share secure configurations ](../../data/connect-data/secure-config.html)
      * [ Data connections ](../../data/connect-data/data-conn.html)
    * [ AI Catalog ](../../data/ai-catalog/index.html) [ AI Catalog ](../../data/ai-catalog/index.html)
      * [ Load data ](../../data/ai-catalog/catalog.html)
      * [ Manage assets ](../../data/ai-catalog/manage-asset.html)
      * [ Work with assets ](../../data/ai-catalog/catalog-asset.html)
      * [ Schedule snapshots ](../../data/ai-catalog/snapshot.html)
      * [ Prepare data with Spark SQL ](../../data/ai-catalog/spark.html)
    * [ Import data ](../../data/import-data/index.html) [ Import data ](../../data/import-data/index.html)
      * [ Import to DataRobot directly ](../../data/import-data/import-to-dr.html)
      * [ Large datasets ](../../data/import-data/large-data/index.html) [ Large datasets ](../../data/import-data/large-data/index.html)
        * [ Fast EDA for large datasets ](../../data/import-data/large-data/fast-eda.html)
    * [ Transform data ](../../data/transform-data/index.html) [ Transform data ](../../data/transform-data/index.html)
      * [ Interaction-based transformations ](../../data/transform-data/feature-disc.html)
      * [ Feature Discovery ](../../data/transform-data/feature-discovery/index.html) [ Feature Discovery ](../../data/transform-data/feature-discovery/index.html)
        * [ End-to-end Feature Discovery ](../../data/transform-data/feature-discovery/enrich-data-using-feature-discovery.html)
        * [ Set up Feature Discovery projects ](../../data/transform-data/feature-discovery/fd-overview.html)
        * [ Snowflake integration ](../../data/transform-data/feature-discovery/fd-snowflake.html)
        * [ Feature Discovery settings ](../../data/transform-data/feature-discovery/fd-adv-opt.html)
        * [ Time-aware feature engineering ](../../data/transform-data/feature-discovery/fd-time.html)
        * [ Derived features ](../../data/transform-data/feature-discovery/fd-gen.html)
        * [ Predictions ](../../data/transform-data/feature-discovery/fd-predict.html)
      * [ Manual transformations ](../../data/transform-data/feature-transforms.html)
    * [ Analyze data ](../../data/analyze-data/index.html) [ Analyze data ](../../data/analyze-data/index.html)
      * [ Assess data quality with EDA ](../../data/analyze-data/assess-data-quality-eda.html)
      * [ Analyze features using histograms ](../../data/analyze-data/analyze-histogram.html)
      * [ Analyze frequent values ](../../data/analyze-data/analyze-frequent-values.html)
      * [ Feature details ](../../data/analyze-data/histogram.html)
      * [ Exploratory Spatial Data Analysis (ESDA) ](../../data/analyze-data/lai-esda.html)
      * [ Feature Associations ](../../data/analyze-data/feature-assoc.html)
      * [ Use data pipelines for ingest and transformation ](../../data/analyze-data/pipelines.html)
    * [ Data preview features ](../../data/data-preview/index.html) [ Data preview features ](../../data/data-preview/index.html)
      * [ Create feature lists in the Relationship Editor ](../../data/data-preview/safer-rel-editor-feature-lists.html)
    * [ Data FAQ ](../../data/data-faq.html)
  * [ Modeling ](../../modeling/index.html) [ Modeling ](../../modeling/index.html)
    * [ Build models ](../../modeling/build-models/index.html) [ Build models ](../../modeling/build-models/index.html)
      * [ Build models ](../../modeling/build-models/build-basic/index.html) [ Build models ](../../modeling/build-models/build-basic/index.html)
        * [ Basic model workflow ](../../modeling/build-models/build-basic/model-data.html)
        * [ Work with feature lists ](../../modeling/build-models/build-basic/feature-lists.html)
        * [ Unlock Holdout ](../../modeling/build-models/build-basic/unlocking-holdout.html)
        * [ Comprehensive Autopilot ](../../modeling/build-models/build-basic/more-accuracy.html)
        * [ Add/delete models ](../../modeling/build-models/build-basic/creating-addl-models.html)
        * [ Frozen runs ](../../modeling/build-models/build-basic/frozen-run.html)
        * [ Model Repository ](../../modeling/build-models/build-basic/repository.html)
      * [ Advanced options ](../../modeling/build-models/adv-opt/index.html) [ Advanced options ](../../modeling/build-models/adv-opt/index.html)
        * [ Additional ](../../modeling/build-models/adv-opt/additional.html)
        * [ Bias and Fairness ](../../modeling/build-models/adv-opt/fairness-metrics.html)
        * [ Clustering advanced options ](../../modeling/build-models/adv-opt/time-series-cluster-adv-opt.html)
        * [ External Predictions ](../../modeling/build-models/adv-opt/external-preds.html)
        * [ Feature Constraints ](../../modeling/build-models/adv-opt/feature-con.html)
        * [ Image Augmentation ](../../modeling/build-models/adv-opt/ttia.html)
        * [ Partitioning ](../../modeling/build-models/adv-opt/partitioning.html)
        * [ Smart Downsampling ](../../modeling/build-models/adv-opt/smart-ds.html)
        * [ Time series ](../../modeling/build-models/adv-opt/time-series-adv-opt.html)
        * [ GPUs for deep learning ](../../modeling/build-models/adv-opt/gpus.html)
    * [ Model insights ](../../modeling/analyze-models/index.html) [ Model insights ](../../modeling/analyze-models/index.html)
      * [ Evaluate ](../../modeling/analyze-models/evaluate/index.html) [ Evaluate ](../../modeling/analyze-models/evaluate/index.html)
        * [ Accuracy Over Space ](../../modeling/special-workflows/location-ai/lai-insights.html)
        * [ Accuracy Over Time ](../../modeling/analyze-models/evaluate/aot.html)
        * [ Advanced Tuning ](../../modeling/analyze-models/evaluate/adv-tuning.html)
        * [ Anomaly visualizations ](../../modeling/analyze-models/evaluate/anom-viz.html)
        * [ Confusion Matrix (for multiclass models) ](../../modeling/analyze-models/evaluate/multiclass.html)
        * [ Forecasting Accuracy ](../../modeling/analyze-models/evaluate/forecast-acc.html)
        * [ Forecast vs Actual ](../../modeling/analyze-models/evaluate/fore-act.html)
        * [ Lift Chart ](../../modeling/analyze-models/evaluate/lift-chart.html)
        * [ Period Accuracy ](../../modeling/analyze-models/evaluate/period-accuracy.html)
        * [ Residuals ](../../modeling/analyze-models/evaluate/residuals.html)
        * [ ROC Curve tools ](../../modeling/analyze-models/evaluate/roc-curve-tab/index.html) [ ROC Curve tools ](../../modeling/analyze-models/evaluate/roc-curve-tab/index.html)
          * [ Use the ROC Curve tools ](../../modeling/analyze-models/evaluate/roc-curve-tab/roc-curve-tab-use.html)
          * [ Select data and display threshold ](../../modeling/analyze-models/evaluate/roc-curve-tab/threshold.html)
          * [ Confusion matrix ](../../modeling/analyze-models/evaluate/roc-curve-tab/confusion-matrix.html)
          * [ Prediction Distribution graph ](../../modeling/analyze-models/evaluate/roc-curve-tab/pred-dist-graph.html)
          * [ ROC curve ](../../modeling/analyze-models/evaluate/roc-curve-tab/roc-curve.html)
          * [ Profit curve ](../../modeling/analyze-models/evaluate/roc-curve-tab/profit-curve.html)
          * [ Cumulative Charts ](../../modeling/analyze-models/evaluate/roc-curve-tab/cumulative-charts.html)
          * [ Custom charts ](../../modeling/analyze-models/evaluate/roc-curve-tab/custom-charts.html)
          * [ Metrics ](../../modeling/analyze-models/evaluate/roc-curve-tab/metrics.html)
        * [ Series Insights (clustering) ](../../modeling/analyze-models/evaluate/series-insights.html)
        * [ Series Insights (multiseries) ](../../modeling/analyze-models/evaluate/series-insights-multi.html)
        * [ Stability ](../../modeling/analyze-models/evaluate/stability.html)
        * [ Training Dashboard ](../../modeling/analyze-models/evaluate/training-dash.html)
      * [ Understand ](../../modeling/analyze-models/understand/index.html) [ Understand ](../../modeling/analyze-models/understand/index.html)
        * [ Cluster Insights ](../../modeling/analyze-models/understand/cluster-insights.html)
        * [ Feature Effects ](../../modeling/analyze-models/understand/feature-effects.html)
        * [ Feature Impact ](../../modeling/analyze-models/understand/feature-impact.html)
        * [ Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/index.html) [ Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/index.html)
          * [ Prediction Explanations overview ](../../modeling/analyze-models/understand/pred-explain/predex-overview.html)
          * [ SHAP Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/shap-pe.html)
          * [ XEMP Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/xemp-pe.html)
          * [ Text Prediction Explanations ](../../modeling/analyze-models/understand/pred-explain/predex-text.html)
          * [ Prediction Explanations for clusters ](../../modeling/analyze-models/understand/pred-explain/cluster-pe.html)
          * [ Prediction Explanations for time-aware projects ](../../modeling/analyze-models/understand/pred-explain/ts-otv-predex.html)
        * [ Word Cloud ](../../modeling/analyze-models/understand/word-cloud.html)
      * [ Describe ](../../modeling/analyze-models/describe/index.html) [ Describe ](../../modeling/analyze-models/describe/index.html)
        * [ Blueprint ](../../modeling/analyze-models/describe/blueprints.html)
        * [ Blueprint JSON ](../../modeling/analyze-models/describe/blueprint-json.html)
        * [ Coefficients (preprocessing) ](../../modeling/analyze-models/describe/coefficients.html)
        * [ Constraints (monotonic) ](../../modeling/analyze-models/describe/monotonic.html)
        * [ Data Quality Handling Report ](../../modeling/analyze-models/describe/dq-report.html)
        * [ Eureqa Models ](../../modeling/analyze-models/describe/eureqa.html)
        * [ Log ](../../modeling/analyze-models/describe/log.html)
        * [ Model Info ](../../modeling/analyze-models/describe/model-info.html)
        * [ Rating Tables ](../../modeling/analyze-models/describe/rating-table.html)
        * [ GA2M output (from Rating Tables) ](../../modeling/analyze-models/describe/ga2m.html)
      * [ Predict ](../../modeling/analyze-models/predictions/index.html) [ Predict ](../../modeling/analyze-models/predictions/index.html)
        * [ Deploy ](../../modeling/analyze-models/predictions/deploy.html)
        * [ Downloads ](../../modeling/analyze-models/predictions/download.html)
        * [ Make Predictions ](../../modeling/analyze-models/predictions/predict.html)
        * [ Portable Predictions ](../../modeling/analyze-models/predictions/port-pred.html)
      * [ Compliance ](../../modeling/analyze-models/compliance/index.html) [ Compliance ](../../modeling/analyze-models/compliance/index.html)
        * [ Model Compliance ](../../modeling/analyze-models/compliance/compliance.html)
        * [ Template Builder for compliance reports ](../../modeling/analyze-models/compliance/template-builder.html)
      * [ Comments ](../../modeling/analyze-models/comments/index.html)
      * [ Bias and Fairness ](../../modeling/analyze-models/bias/index.html) [ Bias and Fairness ](../../modeling/analyze-models/bias/index.html)
        * [ Cross-Class Accuracy ](../../modeling/analyze-models/bias/cross-acc.html)
        * [ Cross-Class Data Disparity ](../../modeling/analyze-models/bias/cross-data.html)
        * [ Per-Class Bias ](../../modeling/analyze-models/bias/per-class.html)
      * [ Other ](../../modeling/analyze-models/other/index.html) [ Other ](../../modeling/analyze-models/other/index.html)
        * [ Bias vs Accuracy ](../../modeling/analyze-models/other/bias-tab.html)
        * [ Insights ](../../modeling/analyze-models/other/analyze-insights.html)
        * [ Learning Curves ](../../modeling/analyze-models/other/learn-curve.html)
        * [ Model Comparison ](../../modeling/analyze-models/other/model-compare.html)
        * [ Speed vs Accuracy ](../../modeling/analyze-models/other/speed.html)
    * [ Specialized workflows ](../../modeling/special-workflows/index.html) [ Specialized workflows ](../../modeling/special-workflows/index.html)
      * [ Bias and Fairness resources ](../../modeling/special-workflows/bias-resources.html)
      * [ Composable ML ](../../modeling/special-workflows/cml/index.html) [ Composable ML ](../../modeling/special-workflows/cml/index.html)
        * [ Composable ML overview ](../../modeling/special-workflows/cml/cml-overview.html)
        * [ Composable ML Quickstart ](../../modeling/special-workflows/cml/cml-quickstart.html)
        * [ Modify a blueprint ](../../modeling/special-workflows/cml/cml-blueprint-edit.html)
        * [ Create custom tasks ](../../modeling/special-workflows/cml/cml-custom-tasks.html)
        * [ Custom environments ](../../modeling/special-workflows/cml/cml-custom-env.html)
        * [ DRUM CLI tool ](../../modeling/special-workflows/cml/cml-drum.html)
        * [ Enable network access for custom tasks ](../../modeling/special-workflows/cml/custom-task-network-access.html)
      * [ Document AI ](../../modeling/special-workflows/doc-ai/index.html) [ Document AI ](../../modeling/special-workflows/doc-ai/index.html)
        * [ Document AI overview ](../../modeling/special-workflows/doc-ai/doc-ai-overview.html)
        * [ Document ingest and modeling ](../../modeling/special-workflows/doc-ai/doc-ai-ingest.html)
        * [ Document AI insights ](../../modeling/special-workflows/doc-ai/doc-ai-insights.html)
        * [ Predictions from documents ](../../modeling/special-workflows/doc-ai/doc-ai-predictions.html)
      * [ Location AI ](../../modeling/special-workflows/location-ai/index.html) [ Location AI ](../../modeling/special-workflows/location-ai/index.html)
        * [ Data ingest ](../../modeling/special-workflows/location-ai/lai-ingest.html)
        * [ Exploratory Spatial Data Analysis (ESDA) ](../../modeling/special-workflows/location-ai/lai-esda.html)
        * [ Modeling ](../../modeling/special-workflows/location-ai/lai-model.html)
        * [ Accuracy Over Space ](../../modeling/special-workflows/location-ai/lai-insights.html)
      * [ Unsupervised learning ](../../modeling/special-workflows/unsupervised/index.html) [ Unsupervised learning ](../../modeling/special-workflows/unsupervised/index.html)
        * [ Anomaly detection ](../../modeling/special-workflows/unsupervised/anomaly-detection.html)
        * [ Clustering ](../../modeling/special-workflows/unsupervised/clustering.html)
      * [ Visual AI ](../../modeling/special-workflows/visual-ai/index.html) [ Visual AI ](../../modeling/special-workflows/visual-ai/index.html)
        * [ Visual AI overview ](../../modeling/special-workflows/visual-ai/vai-overview.html)
        * [ Build Visual AI models ](../../modeling/special-workflows/visual-ai/vai-model.html)
        * [ Train-time image augmentation ](../../modeling/special-workflows/visual-ai/tti-augment/index.html) [ Train-time image augmentation ](../../modeling/special-workflows/visual-ai/tti-augment/index.html)
          * [ About augmented models ](../../modeling/special-workflows/visual-ai/tti-augment/ttia-introduction.html)
          * [ Transformations and lists ](../../modeling/special-workflows/visual-ai/tti-augment/ttia-lists.html)
          * [ Use case examples ](../../modeling/special-workflows/visual-ai/tti-augment/ttia-examples.html)
        * [ Model insights ](../../modeling/special-workflows/visual-ai/vai-insights.html)
        * [ Tune models ](../../modeling/special-workflows/visual-ai/vai-tuning.html)
        * [ Visual AI predictions ](../../modeling/special-workflows/visual-ai/vai-predictions.html)
      * [ Multilabel modeling ](../../modeling/special-workflows/multilabel.html)
      * [ Out-of-time validation modeling ](../../modeling/special-workflows/otv.html)
      * [ Text AI resources ](../../modeling/special-workflows/textai-resources.html)
    * [ Time-series modeling ](../../modeling/time/index.html) [ Time-series modeling ](../../modeling/time/index.html)
      * [ What is time-aware modeling? ](../../modeling/time/whatis-time.html)
      * [ Time series modeling ](../../modeling/time/ts-flow-overview.html)
      * [ Time series insights ](../../modeling/time/ts-leaderboard.html)
      * [ Time series predictions ](../../modeling/time/ts-predictions.html)
      * [ Time series portable predictions with prediction intervals ](../../modeling/time/ts-port-pred-intervals.html)
      * [ Multiseries modeling ](../../modeling/time/multiseries.html)
      * [ Clustering ](../../modeling/time/ts-clustering.html)
      * [ Segmented modeling ](../../modeling/time/ts-segmented.html)
      * [ Nowcasting ](../../modeling/time/nowcasting.html)
      * [ External prediction comparison ](../../modeling/time/cyob.html)
      * [ Batch predictions for TTS and LSTM models ](../../modeling/time/ts-tts-lstm-batch-pred.html)
      * [ Time series advanced modeling ](../../modeling/time/ts-adv-modeling/index.html) [ Time series advanced modeling ](../../modeling/time/ts-adv-modeling/index.html)
        * [ Time series advanced options ](../../modeling/time/ts-adv-modeling/ts-adv-opt.html)
        * [ Clustering advanced options ](../../modeling/time/ts-adv-modeling/ts-cluster-adv-opt.html)
        * [ Date/time partitioning advanced options ](../../modeling/time/ts-adv-modeling/ts-date-time.html)
        * [ Customizing time series projects ](../../modeling/time/ts-adv-modeling/ts-customization.html)
      * [ Time series modeling data ](../../modeling/time/ts-modeling-data/index.html) [ Time series modeling data ](../../modeling/time/ts-modeling-data/index.html)
        * [ Create the modeling dataset ](../../modeling/time/ts-modeling-data/ts-create-data.html)
        * [ Data prep for time series ](../../modeling/time/ts-modeling-data/ts-data-prep.html)
        * [ Restore features removed by reduction ](../../modeling/time/ts-modeling-data/restore-features.html)
    * [ AutoML preview features ](../../modeling/automl-preview/index.html) [ AutoML preview features ](../../modeling/automl-preview/index.html)
      * [ Quantile regression analysis ](../../modeling/automl-preview/quantile-reg.html)
      * [ Configure hyperparameters for custom tasks ](../../modeling/automl-preview/cml-hyperparam.html)
    * [ Modeling FAQ ](../../modeling/general-modeling-faq.html)
    * [ Value Tracker ](../../modeling/value-tracker.html)
    * [ Project control center ](../../modeling/manage-projects.html)
  * [ Predictions ](../../predictions/index.html) [ Predictions ](../../predictions/index.html)
    * [ Real-time scoring methods ](../../predictions/realtime/index.html) [ Real-time scoring methods ](../../predictions/realtime/index.html)
      * [ Prediction API snippets ](../../predictions/realtime/code-py.html)
      * [ Qlik predictions ](../../predictions/realtime/integration-code-snippets.html)
    * [ Batch prediction methods ](../../predictions/batch/index.html) [ Batch prediction methods ](../../predictions/batch/index.html)
      * [ Batch prediction UI ](../../predictions/batch/batch-dep/index.html) [ Batch prediction UI ](../../predictions/batch/batch-dep/index.html)
        * [ Make a one-time batch prediction ](../../predictions/batch/batch-dep/batch-pred.html)
        * [ Schedule recurring batch prediction jobs ](../../predictions/batch/batch-dep/batch-pred-jobs.html)
        * [ Manage prediction job definitions ](../../predictions/batch/batch-dep/manage-pred-job-def.html)
        * [ Snowflake prediction job examples ](../../predictions/batch/batch-dep/pred-job-examples-snowflake.html)
      * [ Prediction monitoring jobs ](../../predictions/batch/pred-monitoring-jobs/index.html) [ Prediction monitoring jobs ](../../predictions/batch/pred-monitoring-jobs/index.html)
        * [ Create monitoring jobs ](../../predictions/batch/pred-monitoring-jobs/ui-monitoring-jobs.html)
        * [ Monitoring jobs API ](../../predictions/batch/pred-monitoring-jobs/api-monitoring-jobs.html)
        * [ Manage monitoring job definitions ](../../predictions/batch/pred-monitoring-jobs/manage-monitoring-job-def.html)
      * [ Manage batch jobs ](../../predictions/batch/batch-jobs.html)
      * [ Batch prediction scripts ](../../predictions/batch/cli-scripts.html)
    * [ Portable prediction methods ](../../predictions/port-pred/index.html) [ Portable prediction methods ](../../predictions/port-pred/index.html)
      * [ Scoring Code ](../../predictions/port-pred/scoring-code/index.html) [ Scoring Code ](../../predictions/port-pred/scoring-code/index.html)
        * [ Download Scoring Code from the Leaderboard ](../../predictions/port-pred/scoring-code/sc-download-leaderboard.html)
        * [ Download Scoring Code from a deployment ](../../predictions/port-pred/scoring-code/sc-download-deployment.html)
        * [ Download Scoring Code from the Leaderboard (Legacy) ](../../predictions/port-pred/scoring-code/sc-download-legacy.html)
        * [ Scoring Code for time series projects ](../../predictions/port-pred/scoring-code/sc-time-series.html)
        * [ Scoring at the command line ](../../predictions/port-pred/scoring-code/scoring-cli.html)
        * [ Scoring Code usage examples ](../../predictions/port-pred/scoring-code/quickstart-api.html)
        * [ JAR structure ](../../predictions/port-pred/scoring-code/jar-package.html)
        * [ Generate Java models in an existing project ](../../predictions/port-pred/scoring-code/build-verify.html)
        * [ Backward-compatible Java API ](../../predictions/port-pred/scoring-code/java-back-compat.html)
        * [ Scoring Code JAR integrations ](../../predictions/port-pred/scoring-code/sc-jar-integrations.html)
        * [ Android integration ](../../predictions/port-pred/scoring-code/android.html)
      * [ Portable Prediction Server ](../../predictions/port-pred/pps/index.html) [ Portable Prediction Server ](../../predictions/port-pred/pps/index.html)
        * [ Portable Prediction Server configuration ](../../predictions/port-pred/pps/portable-pps.html)
        * [ Portable Prediction Server running modes ](../../predictions/port-pred/pps/pps-run-modes.html)
        * [ Portable batch predictions ](../../predictions/port-pred/pps/portable-batch-predictions.html)
        * [ Custom model Portable Prediction Server ](../../predictions/port-pred/pps/custom-pps.html)
      * [ DataRobot Prime (deprecated) ](../../predictions/port-pred/prime/index.html)
    * [ Predictions testing ](../../predictions/pred-test.html)
    * [ Predictions reference ](../../predictions/pred-file-limits.html)
  * [ MLOps ](../../mlops/index.html) [ MLOps ](../../mlops/index.html)
    * [ Deployment ](../../mlops/deployment/index.html) [ Deployment ](../../mlops/deployment/index.html)
      * [ Deployment workflows ](../../mlops/deployment/deploy-workflows/index.html) [ Deployment workflows ](../../mlops/deployment/deploy-workflows/index.html)
        * [ DataRobot model in a DataRobot environment ](../../mlops/deployment/deploy-workflows/dr-model-dr-env.html)
        * [ DataRobot model in a PPS ](../../mlops/deployment/deploy-workflows/dr-model-pps-env.html)
        * [ Custom model in a DataRobot environment ](../../mlops/deployment/deploy-workflows/cus-model-dr-env.html)
        * [ Custom model in a PPS ](../../mlops/deployment/deploy-workflows/cus-model-pps-env.html)
        * [ Scoring Code in an external environment ](../../mlops/deployment/deploy-workflows/ext-dr-model-ext-env.html)
        * [ Monitor an external model with the monitoring agent ](../../mlops/deployment/deploy-workflows/ext-cus-model-ext-env.html)
      * [ Register models ](../../mlops/deployment/registry/index.html) [ Register models ](../../mlops/deployment/registry/index.html)
        * [ Model Registry ](../../mlops/deployment/registry/reg-create.html)
        * [ Register DataRobot models ](../../mlops/deployment/registry/dr-model-reg.html)
        * [ Register custom models ](../../mlops/deployment/registry/reg-custom-models.html)
        * [ Register external models ](../../mlops/deployment/registry/reg-external-models.html)
        * [ Deploy registered models ](../../mlops/deployment/registry/reg-deploy.html)
        * [ View and manage registered models ](../../mlops/deployment/registry/reg-action.html)
        * [ Generate model compliance documentation ](../../mlops/deployment/registry/reg-compliance.html)
        * [ Extend compliance documentation with key values ](../../mlops/deployment/registry/reg-key-values.html)
        * [ Custom jobs ](../../mlops/deployment/registry/reg-custom-jobs.html)
        * [ Import model packages into MLOps ](../../mlops/deployment/registry/reg-transfer.html)
        * [ Model logs for model packages (legacy) ](../../mlops/deployment/registry/reg-model-pkg-logs.html)
      * [ Prepare custom models for deployment ](../../mlops/deployment/custom-models/index.html) [ Prepare custom models for deployment ](../../mlops/deployment/custom-models/index.html)
        * [ Custom Model Workshop ](../../mlops/deployment/custom-models/custom-model-workshop/index.html) [ Custom Model Workshop ](../../mlops/deployment/custom-models/custom-model-workshop/index.html)
          * [ Create custom inference models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-inf-model.html)
          * [ Manage custom model dependencies ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-dependencies.html)
          * [ Manage custom model resources ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-resource-mgmt.html)
          * [ Add custom model versions ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-versions.html)
          * [ Add training data to a custom model ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-training-data.html)
          * [ Add files from remote repos to custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-repos.html)
          * [ Test custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-test.html)
          * [ Manage custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-actions.html)
          * [ Register custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-reg.html)
          * [ Create custom model proxies for external models ](../../mlops/deployment/custom-models/custom-model-workshop/ext-model-proxy.html)
          * [ GitHub Actions for custom models ](../../mlops/deployment/custom-models/custom-model-workshop/custom-model-github-action.html)
        * [ Custom model environments ](../../mlops/deployment/custom-models/custom-model-environments/index.html) [ Custom model environments ](../../mlops/deployment/custom-models/custom-model-environments/index.html)
          * [ Drop-in environments ](../../mlops/deployment/custom-models/custom-model-environments/drop-in-environments.html)
          * [ Custom environments ](../../mlops/deployment/custom-models/custom-model-environments/custom-environments.html)
      * [ Prepare for external model deployment ](../../mlops/deployment/ext-model-prep/index.html) [ Prepare for external model deployment ](../../mlops/deployment/ext-model-prep/index.html)
        * [ Add external prediction environments ](../../mlops/deployment/ext-model-prep/ext-pred-env.html)
        * [ Manage prediction environments ](../../mlops/deployment/ext-model-prep/ext-pred-env-manage.html)
        * [ Register external models ](../../mlops/deployment/ext-model-prep/ext-model-reg.html)
      * [ Manage prediction environments ](../../mlops/deployment/prediction-env/index.html) [ Manage prediction environments ](../../mlops/deployment/prediction-env/index.html)
        * [ Add DataRobot Serverless prediction environments ](../../mlops/deployment/prediction-env/pred-env.html)
        * [ Add external prediction environments ](../../mlops/deployment/prediction-env/ext-pred-env.html)
        * [ Manage prediction environments ](../../mlops/deployment/prediction-env/pred-env-manage.html)
        * [ Deploy a model to a prediction environment ](../../mlops/deployment/prediction-env/pred-env-deploy.html)
        * [ Prediction environment integrations ](../../mlops/deployment/prediction-env/pred-env-integrations/index.html) [ Prediction environment integrations ](../../mlops/deployment/prediction-env/pred-env-integrations/index.html)
          * [ Automated deployment and replacement of Scoring Code in AzureML ](../../mlops/deployment/prediction-env/pred-env-integrations/azureml-sc-deploy-replace.html)
          * [ Automated deployment and replacement in Sagemaker ](../../mlops/deployment/prediction-env/pred-env-integrations/sagemaker-cm-deploy-replace.html)
      * [ Deploy models ](../../mlops/deployment/deploy-methods/index.html) [ Deploy models ](../../mlops/deployment/deploy-methods/index.html)
        * [ Deploy DataRobot models ](../../mlops/deployment/deploy-methods/deploy-model.html)
        * [ Deploy custom models ](../../mlops/deployment/deploy-methods/deploy-custom-inf-model.html)
        * [ Deploy external models ](../../mlops/deployment/deploy-methods/deploy-external-model.html)
        * [ Configure deployment settings ](../../mlops/deployment/deploy-methods/add-deploy-info.html)
        * [ Add prediction data post-deployment ](../../mlops/deployment/deploy-methods/add-prediction-data-post-deploy.html)
      * [ MLOps agents ](../../mlops/deployment/mlops-agent/index.html) [ MLOps agents ](../../mlops/deployment/mlops-agent/index.html)
        * [ Monitoring agent ](../../mlops/deployment/mlops-agent/monitoring-agent/index.html) [ Monitoring agent ](../../mlops/deployment/mlops-agent/monitoring-agent/index.html)
          * [ Installation and configuration ](../../mlops/deployment/mlops-agent/monitoring-agent/agent.html)
          * [ Examples directory ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-ex.html)
          * [ Monitoring agent use cases ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-use.html)
          * [ Environment variables ](../../mlops/deployment/mlops-agent/monitoring-agent/env-var.html)
          * [ Library and agent spooler configuration ](../../mlops/deployment/mlops-agent/monitoring-agent/spooler.html)
          * [ Download Scoring Code ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-sc.html)
          * [ Monitoring external multiclass deployments ](../../mlops/deployment/mlops-agent/monitoring-agent/agent-multi.html)
        * [ Management agent ](../../mlops/deployment/mlops-agent/mgmt-agent/index.html) [ Management agent ](../../mlops/deployment/mlops-agent/mgmt-agent/index.html)
          * [ Installation and configuration ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-install.html)
          * [ Configure environment plugins ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-plugins.html)
          * [ Install the management agent for Kubernetes ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-kubernetes.html)
          * [ Management agent deployment status and events ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-events-status.html)
          * [ Relaunch deployments ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-relaunch.html)
          * [ Force delete deployments ](../../mlops/deployment/mlops-agent/mgmt-agent/mgmt-agent-delete.html)
        * [ Agent event log ](../../mlops/deployment/mlops-agent/agent-event-log.html)
    * [ Deployment settings ](../../mlops/deployment-settings/index.html) [ Deployment settings ](../../mlops/deployment-settings/index.html)
      * [ Set up service health monitoring ](../../mlops/deployment-settings/service-health-settings.html)
      * [ Set up data drift monitoring ](../../mlops/deployment-settings/data-drift-settings.html)
      * [ Set up accuracy monitoring ](../../mlops/deployment-settings/accuracy-settings.html)
      * [ Set up fairness monitoring ](../../mlops/deployment-settings/fairness-settings.html)
      * [ Set up humility rules ](../../mlops/deployment-settings/humility-settings.html)
      * [ Configure retraining ](../../mlops/deployment-settings/retraining-settings.html)
      * [ Configure challengers ](../../mlops/deployment-settings/challengers-settings.html)
      * [ Configure predictions settings ](../../mlops/deployment-settings/predictions-settings.html)
      * [ Enable data exploration ](../../mlops/deployment-settings/data-exploration-settings.html)
      * [ Set up custom metrics monitoring ](../../mlops/deployment-settings/custom-metrics-settings.html)
      * [ Set up timeliness tracking ](../../mlops/deployment-settings/usage-settings.html)
    * [ Lifecycle management ](../../mlops/manage-mlops/index.html) [ Lifecycle management ](../../mlops/manage-mlops/index.html)
      * [ Deployment inventory ](../../mlops/manage-mlops/deploy-inventory.html)
      * [ Manage deployments ](../../mlops/manage-mlops/actions-menu.html)
      * [ Replace deployed models ](../../mlops/manage-mlops/deploy-replace.html)
      * [ Manage Automated Retraining policies ](../../mlops/manage-mlops/set-up-auto-retraining.html)
    * [ Performance monitoring ](../../mlops/monitor/index.html) [ Performance monitoring ](../../mlops/monitor/index.html)
      * [ Overview tab ](../../mlops/monitor/dep-overview.html)
      * [ Accuracy tab ](../../mlops/monitor/deploy-accuracy.html)
      * [ Data Drift tab ](../../mlops/monitor/data-drift.html)
      * [ Service Health tab ](../../mlops/monitor/service-health.html)
      * [ Challengers tab ](../../mlops/monitor/challengers.html)
      * [ Usage tab ](../../mlops/monitor/deploy-usage.html)
      * [ Data Exploration tab ](../../mlops/monitor/data-exploration.html)
      * [ Custom Metrics tab ](../../mlops/monitor/custom-metrics.html)
      * [ Segmented analysis ](../../mlops/monitor/deploy-segment.html)
      * [ Batch monitoring ](../../mlops/monitor/deploy-batch-monitor.html)
      * [ Generative model monitoring ](../../mlops/monitor/generative-model-monitoring.html)
    * [ Governance ](../../mlops/governance/index.html) [ Governance ](../../mlops/governance/index.html)
      * [ Model deployment approval workflow ](../../mlops/governance/dep-admin.html)
      * [ Governance lens ](../../mlops/governance/gov-lens.html)
      * [ Notifications tab ](../../mlops/governance/deploy-notifications.html)
      * [ Humility tab ](../../mlops/governance/humble.html)
      * [ Fairness tab ](../../mlops/governance/mlops-fairness.html)
      * [ Deployment reports ](../../mlops/governance/deploy-reports.html)
    * [ MLOps preview features ](../../mlops/mlops-preview/index.html) [ MLOps preview features ](../../mlops/mlops-preview/index.html)
      * [ Service Health and Accuracy history ](../../mlops/mlops-preview/pp-deploy-history.html)
      * [ Automated deployment and replacement of Scoring Code in Snowflake ](../../mlops/mlops-preview/pp-snowflake-sc-deploy-replace.html)
      * [ Run the monitoring agent in DataRobot ](../../mlops/mlops-preview/monitoring-agent-in-dr.html)
      * [ Feature cache for Feature Discovery deployments ](../../mlops/mlops-preview/safer-ft-cache.html)
      * [ MLOps reporting for unstructured models ](../../mlops/mlops-preview/mlops-unstructured-models.html)
    * [ MLOps FAQ ](../../mlops/mlops-faq.html)
  * [ Notebooks ](../../dr-notebooks/index.html) [ Notebooks ](../../dr-notebooks/index.html)
    * [ Manage notebooks ](../../dr-notebooks/manage-nb/index.html) [ Manage notebooks ](../../dr-notebooks/manage-nb/index.html)
      * [ Add notebooks ](../../dr-notebooks/manage-nb/dr-create-nb.html)
      * [ Notebook settings ](../../dr-notebooks/manage-nb/dr-settings-nb.html)
      * [ Notebook versioning ](../../dr-notebooks/manage-nb/dr-revise-nb.html)
    * [ Notebook coding experience ](../../dr-notebooks/code-nb/index.html) [ Notebook coding experience ](../../dr-notebooks/code-nb/index.html)
      * [ Environment management ](../../dr-notebooks/code-nb/dr-env-nb.html)
      * [ Create and execute cells ](../../dr-notebooks/code-nb/dr-cell-nb.html)
      * [ Cell actions ](../../dr-notebooks/code-nb/dr-action-nb.html)
      * [ Code intelligence ](../../dr-notebooks/code-nb/dr-code-int.html)
      * [ Notebook terminals ](../../dr-notebooks/code-nb/dr-terminal-nb.html)
      * [ Azure OpenAI Service integration ](../../dr-notebooks/code-nb/dr-openai-nb.html)
    * [ Notebook reference ](../../dr-notebooks/dr-notebook-ref.html)
  * [ AI Apps ](../../app-builder/index.html) [ AI Apps ](../../app-builder/index.html)
    * [ Create applications ](../../app-builder/create-app.html)
    * [ Manage applications ](../../app-builder/current-app.html)
    * [ Edit no-code applications ](../../app-builder/edit-apps/index.html) [ Edit no-code applications ](../../app-builder/edit-apps/index.html)
      * [ Pages ](../../app-builder/edit-apps/app-pages.html)
      * [ Widgets ](../../app-builder/edit-apps/app-widgets.html)
      * [ What-if and Optimizer ](../../app-builder/edit-apps/whatif-opt.html)
      * [ Settings ](../../app-builder/edit-apps/app-settings.html)
    * [ Use no-code applications ](../../app-builder/use-apps/index.html) [ Use no-code applications ](../../app-builder/use-apps/index.html)
      * [ Make predictions ](../../app-builder/use-apps/app-make-pred.html)
      * [ View prediction results ](../../app-builder/use-apps/app-analyze-result.html)
    * [ Time series applications ](../../app-builder/ts-app.html)
    * [ Custom apps ](../../app-builder/custom-apps/index.html) [ Custom apps ](../../app-builder/custom-apps/index.html)
      * [ Upload custom applications ](../../app-builder/custom-apps/app-upload-custom.html)
      * [ Host custom applications ](../../app-builder/custom-apps/custom-apps-hosting.html)
      * [ Manage custom applications ](../../app-builder/custom-apps/manage-custom-apps.html)
    * [ AI App reference ](../../app-builder/reference/index.html) [ AI App reference ](../../app-builder/reference/index.html)
      * [ Default widgets ](../../app-builder/reference/default-widgets.html)
      * [ Optional widgets ](../../app-builder/reference/optional-widgets.html)
    * [ AI App preview features ](../../app-builder/app-preview/index.html) [ AI App preview features ](../../app-builder/app-preview/index.html)
      * [ Prefill application templates ](../../app-builder/app-preview/app-prefill.html)
      * [ Feature Discovery support in No-Code AI Apps ](../../app-builder/app-preview/app-ft-cache.html)
  * [ Integrations ](../index.html) [ Integrations ](../index.html)
    * [ AWS ](../aws/index.html) [ AWS ](../aws/index.html)
      * [ Import data from AWS S3 ](../aws/import-from-aws-s3.html)
      * [ Deploy models on AWS EKS ](../aws/deploy-dr-models-on-aws.html)
      * [ Path-based routing to PPS ](../aws/path-based-routing-to-pps-on-aws.html)
      * [ Score Snowflake data on AWS EMR Spark ](../aws/score-snowflake-aws-emr-spark.html)
      * [ Ingest data with AWS Athena ](../aws/ingest-athena.html)
      * [ AWS Lambda ](../aws/lambda/index.html) [ AWS Lambda ](../aws/lambda/index.html)
        * [ AWS Lambda reporting to MLOps ](../aws/lambda/aws-lambda-reporting-to-mlops.html)
        * [ Use DataRobot Prime models with AWS Lambda ](../aws/lambda/prime-lambda.html)
        * [ Use Scoring Code with AWS Lambda ](../aws/lambda/sc-lambda.html)
      * [ Amazon SageMaker ](../aws/sagemaker/index.html) [ Amazon SageMaker ](../aws/sagemaker/index.html)
        * [ Deploy models on SageMaker ](../aws/sagemaker/sagemaker-deploy.html)
        * [ Use Scoring Code with AWS SageMaker ](../aws/sagemaker/sc-sagemaker.html)
    * [ Azure ](index.html) [ Azure ](index.html)
      * [ Run Batch Prediction jobs from Azure Blob Storage ](azure-blob-storage-batch-pred.html)
      * [ Deploy and monitor DataRobot models in Azure Kubernetes Service ](aks-deploy-and-monitor.html)
      * [ Deploy and monitor Spark models with DataRobot MLOps ](spark-deploy-and-monitor.html) [ Deploy and monitor Spark models with DataRobot MLOps ](spark-deploy-and-monitor.html)

[For Self-Managed AI Platform users running v11.1, see the on-premise platform
documentation __](/11.1/en/docs/index.html)

Deploy and monitor Spark models with DataRobot MLOps

        * Create a model 
        * Deploy a model 
        * Install the MLOps monitoring agent and library 
          * Create an AKS cluster 
          * Install RabbitMQ 
          * Download the MLOps monitoring agent 
          * Install the MLOps monitoring agent 
          * Install the MLOps library in a Spark cluster 
        * Run your Model 
        * Report usage to MLOps via monitoring agents 
          * Create an external deployment 
          * Report prediction details 
          * Report actuals 

      * [ Deploy and monitor ML.NET models with DataRobot MLOps ](mlnet-deploy-and-monitor.html)
      * [ Use Scoring Code with Azure ML ](sc-azureml.html)
    * [ Google ](../google/index.html) [ Google ](../google/index.html)
      * [ Deploy and monitor models on GCP ](../google/google-cloud-platform.html)
      * [ Deploy the MLOps agent on GKE ](../google/mlops-agent-with-gke.html)
    * [ Snowflake ](../snowflake/index.html) [ Snowflake ](../snowflake/index.html)
      * [ Data ingest and project creation ](../snowflake/sf-project-creation.html)
      * [ Real-time predictions ](../snowflake/sf-client-scoring.html)
      * [ Server-side model scoring ](../snowflake/sf-server-scoring.html)
      * [ Snowflake external functions and streams ](../snowflake/sf-function-streams.html)
      * [ Generate Snowflake UDF Scoring Code ](../snowflake/snowflake-sc.html)

[For Self-Managed AI Platform users running v11.1, see the on-premise platform
documentation __](/11.1/en/docs/index.html)

Deploy and monitor Spark models with DataRobot MLOps

  * Create a model 
  * Deploy a model 
  * Install the MLOps monitoring agent and library 
    * Create an AKS cluster 
    * Install RabbitMQ 
    * Download the MLOps monitoring agent 
    * Install the MLOps monitoring agent 
    * Install the MLOps library in a Spark cluster 
  * Run your Model 
  * Report usage to MLOps via monitoring agents 
    * Create an external deployment 
    * Report prediction details 
    * Report actuals 

[Integrations](../index.html "Integrations") > [Azure](index.html "Azure") >
Deploy and monitor Spark models with DataRobot MLOps

# Deploy and monitor Spark models with DataRobot MLOps¶

This page shows how to use DataRobot's Monitoring Agent (MLOps agent) to
manage and monitor models from a central dashboard without deploying them
within MLOps.

You will explore how to manage and monitor remote models—models that are not
running within DataRobot MLOps—deployed on your own infrastructure. Common
examples are serverless deployments (AWS Lambda, Azure Functions) or
deployments on Spark clusters (Hadoop, Databricks, AWS EMR).

[![](../../images/int_htmsmwdm_large_014.png)](../../images/int_htmsmwdm_large_014.png)

The sections below show how to take a DataRobot model to be deployed on a
Databricks cluster and monitor this model with DataRobot MLOps in a central
dashboard. This dashboard covers all of your models, regardless of where they
were developed or deployed. This approach works for any model that runs within
a Spark cluster.

## Create a model¶

In this section, you are creating a model with DataRobot AutoML, then
importing it into your Databricks cluster, using the [Lending Club
dataset](https://datarobot-doc-assets.s3.us-
east-1.amazonaws.com/10K_Lending_Club_Loans.csv).

Note

If you already have a regression model that runs in your Spark cluster, you
can skip this step and proceed to Install the MLOps monitoring agent and
library.

  1. To upload the training data to DataRobot, do either of the following:

     * Click **Local File** , and then select the LendingClub dataset CSV file from your local filesystem.

     * Click **URL** to open the **Import URL** dialog box and copy the LendingClub dataset URL above:

[![](../../images/int_htmsmwdm_large_008.png)](../../images/int_htmsmwdm_large_008.png)

In the **Import URL** dialog box, paste the LendingClub dataset **URL** and
click **Import from URL** :

[![](../../images/int_htmsmwdm_large_006.png)](../../images/int_htmsmwdm_large_006.png)

  2. Enter `loan_amt` as your target (1) (what you want to predict) and click **Start** (2) to run Autopilot.

[![](../../images/int_htmsmwdm_large_009.png)](../../images/int_htmsmwdm_large_009.png)

  3. After Autopilot finishes, click **Models** (1) and select a model with the **SCORING CODE** label (2) at the top of the Leaderboard (3).

[![](../../images/int_htmsmwdm_large_007.png)](../../images/int_htmsmwdm_large_007.png)

  4. Under the model you selected, click **Predict** (1) and click **Downloads** (2) to access the **Scoring Code JAR** download.

[![](../../images/int_htmsmwdm_large_010.png)](../../images/int_htmsmwdm_large_010.png)

Note

The ability to download Scoring Code for a model from the Leaderboard depends
on the MLOps configuration for your organization.

  5. Click **Download** (3) to start the JAR file download.

For more information, see the documentation on [Scoring
Code](../../predictions/port-pred/scoring-code/index.html).

## Deploy a model¶

To install Scoring Code, you can install the previously downloaded JAR file,
along with Spark Wrapper, on the Databricks cluster as shown below.

  1. Click **Clusters** to open the cluster settings.

  2. Select the cluster to which you'd like to deploy the DataRobot model.

  3. Click the **Libraries** tab.

  4. Click **Install New**.

  5. In the **Install Library** dialog box, with the **Library Source** set to **Upload** and the **Library Type** set to **JAR** , drag-and-drop the Scoring Code JAR file (e.g., `5ed68d70455df33366ce0508.jar`),

  6. Click **Install**.

[![](../../images/int_htmsmwdm_large_019.png)](../../images/int_htmsmwdm_large_019.png)

Once the install is complete, repeat the same steps and install Spark Wrapper,
which you can [download here](https://github.com/datarobot-
community/ai_engineering/blob/master/mlops/DRMLOps_Spark_examples/scoring-
code-spark-api.jar), or pull the latest version of it directly from
[Maven](https://mvnrepository.com/artifact/com.datarobot/scoring-code-spark-
api_2.4.3).

## Install the MLOps monitoring agent and library¶

[![](../../images/int_htmsmwdm_large_015.png)](../../images/int_htmsmwdm_large_015.png)

Remote models do not directly communicate with DataRobot MLOps. Instead, the
communication is handled via DataRobot MLOps monitoring agents, which support
many spooling mechanisms (e.g., flat files, AWS SQS, RabbitMQ). These agents
are typically deployed in the external environment where the model is running.

Libraries are available for all common programming languages to simplify
communication with the DataRobot MLOps monitoring agent. The model is
instructed to talk to the agent with the help of the MLOps library. The agent
then collects all metrics from the model and relays them to the MLOps server
and dashboards.

In this example, the runtime environment is Spark. Therefore, you will install
the MLOps library to your Spark cluster (Databricks) in the same way you
installed the model itself previously (in **Deploy a Model**). You will also
install the MLOps monitoring agent in an Azure Kubernetes Service (AKS)
cluster alongside RabbitMQ, which is used as your queuing system.

This process assumes that you are familiar with Azure Kubernetes Service and
the Azure CLI. For more information, see [Microsoft's Quick Start
Tutorial](https://docs.microsoft.com/en-us/azure/aks/kubernetes-walkthrough).

### Create an AKS cluster¶

  1. If you don't have a running AKS cluster, create one, as shown below:
         
         RESOURCE_GROUP=ai_success_eng
         CLUSTER_NAME=AIEngineeringDemo
         
         az aks create \
         --resource-group $RESOURCE_GROUP \
         --name $CLUSTER_NAME \
         -s Standard_B2s \
         --node-count 1 \
         --generate-ssh-keys \
         --service-principal XXXXXX \
         --client-secret XXXX \
         --enable-cluster-autoscaler \
         --min-count 1 \
         --max-count 2
         

  2. Start the Kubernetes dashboard:
         
         az aks browse --resource-group $RESOURCE_GROUP --name $CLUSTER_NAME​
         

### Install RabbitMQ¶

There are many ways to deploy applications. The most direct way is via the
Kubernetes dashboard.

To install RabbitMQ:

  1. Click **CREATE > CREATE AN APP** (1).

  2. On the **CREATE AN APP** page (2), specify the following:

[![](../../images/int_htmsmwdm_large_016.png)](../../images/int_htmsmwdm_large_016.png)

| Field | Value  
---|---|---  
3 | **App name** | e.g., `rabbitmqdemo`  
4 | **Container image** | e.g., `rabbitmq:latest`  
5 | **Number of pods** | e.g., `1`  
6 | **Service** | `External`  
7 | **Port** and **Target port** | `5672` and `5672`   
`15672` and `15672`  
  3. Click **DEPLOY** (8).

### Download the MLOps monitoring agent¶

To download the MLOps monitoring agent directly from your DataRobot cluster:

  1. In the upper-right corner of DataRobot, click your profile icon (or the default avatar [![](../../images/icon-gen-settings.png)](../../images/icon-gen-settings.png)).

  2. Click **API keys and tools**.

  3. Under **External Monitoring Agent** , click the download icon.

[![](../../images/int_htmsmwdm_large_021.png)](../../images/int_htmsmwdm_large_021.png)

### Install the MLOps monitoring agent¶

You can install the agent anywhere; however, for this process, you will
install it alongside RabbitMQ.

  1. Copy the monitoring agent tarball you downloaded in the previous section to the container where RabbitMQ is running. To do this, run the following command:

Note

You may need to replace the filename of the tarball in the example below.

         
         kubectl cp datarobot-mlops-agent-6.1.0.tar.gz default/rabbitmq-649ccbd8cb-qjb4l:/opt
         

  2. Click **Pods** (1) and click the container **Name** (2) to connect to the CLI of the container.

[![](../../images/int_htmsmwdm_large_020.png)](../../images/int_htmsmwdm_large_020.png)

  3. Click **Exec** (3) to start the container.

[![](../../images/int_htmsmwdm_large_011.png)](../../images/int_htmsmwdm_large_011.png)

  4. In the container's CLI, begin to configure the agent. Review the tarball name and, if necessary, update the filename in the following commands, and then run them:
         
         cd /opt && tar -xvzf mlops-agent-6.1.0.tar &&
         cd mlops-agent-6.1.0/conf
         

  5. In the directory, update the `mlops.agent.conf.yaml` configuration file to point to your DataRobot MLOps instance and message queue.

  6. To update the configuration and run the agent, you must install Vim and Java with the following commands:
         
         apt-get update &&
         apt-get install vim &&
         apt-get install default-jdk
         

  7. In this example, you are using RabbitMQ and the DataRobot managed AI Platform solution, so you must configure the `mlopsURL` and `apiToken` (1) and the `channelConfigs` (2) as shown below.

[![](../../images/int_htmsmwdm_large_004.png)](../../images/int_htmsmwdm_large_004.png)

Note

You can obtain your `apiToken` from the [Developer Tools](../../platform/acct-
settings/api-key-mgmt.html#api-key-management).

  8. Before starting the agent, you can enable the RabbitMQ Management UI and create a new user to monitor queues:
         
         ### Enable the RabbitMQ UI
         
         rabbitmq-plugins enable rabbitmq_management &&
         
         ### Add a user via the CLI
         
         rabbitmqctl add_user <username> <your password> &&
         rabbitmqctl set_user_tags <username> administrator &&
         rabbitmqctl set_permissions -p / <username> ".*" ".*" ".*"
         

  9. Now that RabbitMQ is configured and the updated configuration is saved, switch to the `/bin` directory and start the agent:
         
         cd ../bin &&
         ./start-agent.sh
         

  10. Confirm that the agent is running correctly by checking its status:
         
         ./status-agent.sh
         

  11. To ensure that everything is running as expected, check the logs located in the `/logs` directory.

[![](../../images/int_htmsmwdm_large_013.png)](../../images/int_htmsmwdm_large_013.png)

### Install the MLOps library in a Spark cluster¶

First, [Download the library from here](https://github.com/datarobot-
community/ai_engineering/blob/master/mlops/DRMLOps_Spark_examples/datarobot-
mlops-6.2.0.jar).

To install the library in a Spark cluster (Databricks):

  1. Click **Clusters** to open the cluster settings.

  2. Select the cluster to which you'd like to deploy the DataRobot model.

  3. Click the **Libraries** tab.

  4. In the **Install Library** dialog box, with the **Library Source** set to **Upload** and the **Library Type** set to **JAR** , drag-and-drop the MLOps JAR file (e.g., `MLOps.jar`).

  5. Click **Install**.

[![](../../images/int_htmsmwdm_large_002.png)](../../images/int_htmsmwdm_large_002.png)

## Run your Model¶

Now that all the prerequisites are in place, run your model to make
predictions:

    
    
    // Scala example (see also PySpark example in notebook references at the bottom)
    
    // 1) Use local DataRobot Model for Scoring
    import com.datarobot.prediction.spark.Predictors
    
    // referencing model_id, which is the same as the generated filename of the JAR file
    val DataRobotModel = com.datarobot.prediction.spark.Predictors.getPredictor("5ed68d70455df33366ce0508")
    
    // 2) read the scoring data
    val scoringDF = sql("select * from 10k_lending_club_loans_with_id_csv")
    
    // 3) Score the data and save results to spark dataframe
    val output = DataRobotModel.transform(scoringDF)
    
    // 4) Review/consume scoring results
    output.show(1,false)
    

To track the actual scoring time, wrap the scoring command, so the updated
code would look like the following:

    
    
    // to track the actual scoring time
    
    def time[A](f: => A): Double = {
      val s = System.nanoTime
      val ret = f
      val scoreTime = (System.nanoTime-s)/1e6 * 0.001
      println("time: "+ scoreTime+"s")
      return scoreTime
    }
    
    // 1) Use local DataRobot Model for Scoring
    import com.datarobot.prediction.spark.Predictors
    
    // referencing model_id, which is the same as the generated filename of the JAR file
    val DataRobotModel = com.datarobot.prediction.spark.Predictors.getPredictor("5ed708a8fca6a1433abddbcb")
    
    // 2) read the scoring data
    val scoringDF = sql("select * from 10k_lending_club_loans_with_id_csv")
    
    val scoreTime = time {
    
      // Score the data and save results to spark dataframe
      val scoring_output = DataRobotModel.transform(scoringDF)
      scoring_output.show(1,false)
      scoring_output.createOrReplaceTempView("scoring_output")
    }
    

## Report usage to MLOps via monitoring agents¶

After using the model to predict the loan amount of an application, you can
report the telemetrics around these predictions to your DataRobot MLOps server
and dashboards. To do this, see the commands in the following sections.

### Create an external deployment¶

Before you can report scoring details, you must create an external deployment
within DataRobot MLOps. This only has to be done once and can be done via the
UI in DataRobot MLOps:

  1. Click **Model Registry** (1), click **Model Packages** (2), and then click **New external model package** (3).

[![](../../images/int_htmsmwdm_large.png)](../../images/int_htmsmwdm_large.png)

  2. Specify a package name and description (1 and 2), upload the corresponding training data for drift tracking (3), and identify the model location (4), target (5), environment (6), and prediction type (7), then click **Create package** (8).

[![](../../images/int_htmsmwdm_large_005.png)](../../images/int_htmsmwdm_large_005.png)

  3. After creating the external model package, note the model ID in the URL, as shown below (blurred in the image for security purposes).

[![](../../images/int_htmsmwdm_large_017.png)](../../images/int_htmsmwdm_large_017.png)

  4. Click **Deployments** (1) and click **Create new deployment** (2).

[![](../../images/int_htmsmwdm_large_003.png)](../../images/int_htmsmwdm_large_003.png)

Once the deployment is created, the **Deployments > Overview** page is shown.

  5. On the **Overview** page, copy the deployment ID (from the URL).

[![](../../images/int_htmsmwdm_large_018.png)](../../images/int_htmsmwdm_large_018.png)

Now that you have your model ID and deployment ID, you can report the
predictions in the next section.

### Report prediction details¶

To report prediction details to DataRobot, run the following code in your
Spark environment. Make sure you update the input parameters.

    
    
    import com.datarobot.mlops.spark.MLOpsSparkUtils
    val channelConfig = "OUTPUT_TYPE=RABBITMQ;RABBITMQ_URL=amqp://<<RABBIT HOSTNAME>>:5672;RABBITMQ_QUEUE_NAME=mlopsQueue"
    
    MLOpsSparkUtils.reportPredictions(
    
                    scoringDF, // spark dataframe with actual scoring data
                    "5ec3313XXXXXXXXX", // external DeploymentId
                    "5ec3313XXXXXXXXX", // external ModelId
                    channelConfig, // rabbitMQ config
                    scoringTime, // actual scoring time
                    Array("PREDICTION"), //target column
                    "id" // AssociationId
                    )
    

### Report actuals¶

When you get actual values, you can report them to track accuracy over time.

Report actuals using the function below:

    
    
    import com.datarobot.mlops.spark.MLOpsSparkUtils
    
    val actualsDF = spark.sql("select id as associationId, loan_amnt as actualValue, null as timestamp from actuals")
    
    MLOpsSparkUtils.reportActuals(
          actualsDF,
          deploymentId,
          ModelId,
          channelConfig
        )
    

Even though you deployed a model outside of DataRobot on a Spark cluster
(Databricks), you can monitor it like any other model to track service health,
data drift, and actuals in one central dashboard.

[![](../../images/int_htmsmwdm_large_012.png)](../../images/int_htmsmwdm_large_012.png)

For complete sample notebooks with code snippets for Scala and PySpark, go to
[the DataRobot Community GitHub](https://github.com/datarobot-
community/ai_engineering/tree/master/mlops/DRMLOps_Spark_examples).

Back to top

