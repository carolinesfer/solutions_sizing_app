[ DataRobot docs ](../../../../index.html "DataRobot docs")

  * [ Data ](../../../../data/index.html) [ Data ](../../../../data/index.html)
    * [ Data connections ](../../../../data/connect-data/index.html) [ Data connections ](../../../../data/connect-data/index.html)
      * [ Share secure configurations ](../../../../data/connect-data/secure-config.html)
      * [ Data connections ](../../../../data/connect-data/data-conn.html)
    * [ AI Catalog ](../../../../data/ai-catalog/index.html) [ AI Catalog ](../../../../data/ai-catalog/index.html)
      * [ Load data ](../../../../data/ai-catalog/catalog.html)
      * [ Manage assets ](../../../../data/ai-catalog/manage-asset.html)
      * [ Work with assets ](../../../../data/ai-catalog/catalog-asset.html)
      * [ Schedule snapshots ](../../../../data/ai-catalog/snapshot.html)
      * [ Prepare data with Spark SQL ](../../../../data/ai-catalog/spark.html)
    * [ Import data ](../../../../data/import-data/index.html) [ Import data ](../../../../data/import-data/index.html)
      * [ Import to DataRobot directly ](../../../../data/import-data/import-to-dr.html)
      * [ Large datasets ](../../../../data/import-data/large-data/index.html) [ Large datasets ](../../../../data/import-data/large-data/index.html)
        * [ Fast EDA for large datasets ](../../../../data/import-data/large-data/fast-eda.html)
    * [ Transform data ](../../../../data/transform-data/index.html) [ Transform data ](../../../../data/transform-data/index.html)
      * [ Interaction-based transformations ](../../../../data/transform-data/feature-disc.html)
      * [ Feature Discovery ](../../../../data/transform-data/feature-discovery/index.html) [ Feature Discovery ](../../../../data/transform-data/feature-discovery/index.html)
        * [ End-to-end Feature Discovery ](../../../../data/transform-data/feature-discovery/enrich-data-using-feature-discovery.html)
        * [ Set up Feature Discovery projects ](../../../../data/transform-data/feature-discovery/fd-overview.html)
        * [ Snowflake integration ](../../../../data/transform-data/feature-discovery/fd-snowflake.html)
        * [ Feature Discovery settings ](../../../../data/transform-data/feature-discovery/fd-adv-opt.html)
        * [ Time-aware feature engineering ](../../../../data/transform-data/feature-discovery/fd-time.html)
        * [ Derived features ](../../../../data/transform-data/feature-discovery/fd-gen.html)
        * [ Predictions ](../../../../data/transform-data/feature-discovery/fd-predict.html)
      * [ Manual transformations ](../../../../data/transform-data/feature-transforms.html)
    * [ Analyze data ](../../../../data/analyze-data/index.html) [ Analyze data ](../../../../data/analyze-data/index.html)
      * [ Assess data quality with EDA ](../../../../data/analyze-data/assess-data-quality-eda.html)
      * [ Analyze features using histograms ](../../../../data/analyze-data/analyze-histogram.html)
      * [ Analyze frequent values ](../../../../data/analyze-data/analyze-frequent-values.html)
      * [ Feature details ](../../../../data/analyze-data/histogram.html)
      * [ Exploratory Spatial Data Analysis (ESDA) ](../../../../data/analyze-data/lai-esda.html)
      * [ Feature Associations ](../../../../data/analyze-data/feature-assoc.html)
      * [ Use data pipelines for ingest and transformation ](../../../../data/analyze-data/pipelines.html)
    * [ Data preview features ](../../../../data/data-preview/index.html) [ Data preview features ](../../../../data/data-preview/index.html)
      * [ Create feature lists in the Relationship Editor ](../../../../data/data-preview/safer-rel-editor-feature-lists.html)
    * [ Data FAQ ](../../../../data/data-faq.html)
  * [ Modeling ](../../../../modeling/index.html) [ Modeling ](../../../../modeling/index.html)
    * [ Build models ](../../../../modeling/build-models/index.html) [ Build models ](../../../../modeling/build-models/index.html)
      * [ Build models ](../../../../modeling/build-models/build-basic/index.html) [ Build models ](../../../../modeling/build-models/build-basic/index.html)
        * [ Basic model workflow ](../../../../modeling/build-models/build-basic/model-data.html)
        * [ Work with feature lists ](../../../../modeling/build-models/build-basic/feature-lists.html)
        * [ Unlock Holdout ](../../../../modeling/build-models/build-basic/unlocking-holdout.html)
        * [ Comprehensive Autopilot ](../../../../modeling/build-models/build-basic/more-accuracy.html)
        * [ Add/delete models ](../../../../modeling/build-models/build-basic/creating-addl-models.html)
        * [ Frozen runs ](../../../../modeling/build-models/build-basic/frozen-run.html)
        * [ Model Repository ](../../../../modeling/build-models/build-basic/repository.html)
      * [ Advanced options ](../../../../modeling/build-models/adv-opt/index.html) [ Advanced options ](../../../../modeling/build-models/adv-opt/index.html)
        * [ Additional ](../../../../modeling/build-models/adv-opt/additional.html)
        * [ Bias and Fairness ](../../../../modeling/build-models/adv-opt/fairness-metrics.html)
        * [ Clustering advanced options ](../../../../modeling/build-models/adv-opt/time-series-cluster-adv-opt.html)
        * [ External Predictions ](../../../../modeling/build-models/adv-opt/external-preds.html)
        * [ Feature Constraints ](../../../../modeling/build-models/adv-opt/feature-con.html)
        * [ Image Augmentation ](../../../../modeling/build-models/adv-opt/ttia.html)
        * [ Partitioning ](../../../../modeling/build-models/adv-opt/partitioning.html)
        * [ Smart Downsampling ](../../../../modeling/build-models/adv-opt/smart-ds.html)
        * [ Time series ](../../../../modeling/build-models/adv-opt/time-series-adv-opt.html)
        * [ GPUs for deep learning ](../../../../modeling/build-models/adv-opt/gpus.html)
    * [ Model insights ](../../../../modeling/analyze-models/index.html) [ Model insights ](../../../../modeling/analyze-models/index.html)
      * [ Evaluate ](../../../../modeling/analyze-models/evaluate/index.html) [ Evaluate ](../../../../modeling/analyze-models/evaluate/index.html)
        * [ Accuracy Over Space ](../../../../modeling/special-workflows/location-ai/lai-insights.html)
        * [ Accuracy Over Time ](../../../../modeling/analyze-models/evaluate/aot.html)
        * [ Advanced Tuning ](../../../../modeling/analyze-models/evaluate/adv-tuning.html)
        * [ Anomaly visualizations ](../../../../modeling/analyze-models/evaluate/anom-viz.html)
        * [ Confusion Matrix (for multiclass models) ](../../../../modeling/analyze-models/evaluate/multiclass.html)
        * [ Forecasting Accuracy ](../../../../modeling/analyze-models/evaluate/forecast-acc.html)
        * [ Forecast vs Actual ](../../../../modeling/analyze-models/evaluate/fore-act.html)
        * [ Lift Chart ](../../../../modeling/analyze-models/evaluate/lift-chart.html)
        * [ Period Accuracy ](../../../../modeling/analyze-models/evaluate/period-accuracy.html)
        * [ Residuals ](../../../../modeling/analyze-models/evaluate/residuals.html)
        * [ ROC Curve tools ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/index.html) [ ROC Curve tools ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/index.html)
          * [ Use the ROC Curve tools ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/roc-curve-tab-use.html)
          * [ Select data and display threshold ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/threshold.html)
          * [ Confusion matrix ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/confusion-matrix.html)
          * [ Prediction Distribution graph ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/pred-dist-graph.html)
          * [ ROC curve ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/roc-curve.html)
          * [ Profit curve ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/profit-curve.html)
          * [ Cumulative Charts ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/cumulative-charts.html)
          * [ Custom charts ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/custom-charts.html)
          * [ Metrics ](../../../../modeling/analyze-models/evaluate/roc-curve-tab/metrics.html)
        * [ Series Insights (clustering) ](../../../../modeling/analyze-models/evaluate/series-insights.html)
        * [ Series Insights (multiseries) ](../../../../modeling/analyze-models/evaluate/series-insights-multi.html)
        * [ Stability ](../../../../modeling/analyze-models/evaluate/stability.html)
        * [ Training Dashboard ](../../../../modeling/analyze-models/evaluate/training-dash.html)
      * [ Understand ](../../../../modeling/analyze-models/understand/index.html) [ Understand ](../../../../modeling/analyze-models/understand/index.html)
        * [ Cluster Insights ](../../../../modeling/analyze-models/understand/cluster-insights.html)
        * [ Feature Effects ](../../../../modeling/analyze-models/understand/feature-effects.html)
        * [ Feature Impact ](../../../../modeling/analyze-models/understand/feature-impact.html)
        * [ Prediction Explanations ](../../../../modeling/analyze-models/understand/pred-explain/index.html) [ Prediction Explanations ](../../../../modeling/analyze-models/understand/pred-explain/index.html)
          * [ Prediction Explanations overview ](../../../../modeling/analyze-models/understand/pred-explain/predex-overview.html)
          * [ SHAP Prediction Explanations ](../../../../modeling/analyze-models/understand/pred-explain/shap-pe.html)
          * [ XEMP Prediction Explanations ](../../../../modeling/analyze-models/understand/pred-explain/xemp-pe.html)
          * [ Text Prediction Explanations ](../../../../modeling/analyze-models/understand/pred-explain/predex-text.html)
          * [ Prediction Explanations for clusters ](../../../../modeling/analyze-models/understand/pred-explain/cluster-pe.html)
          * [ Prediction Explanations for time-aware projects ](../../../../modeling/analyze-models/understand/pred-explain/ts-otv-predex.html)
        * [ Word Cloud ](../../../../modeling/analyze-models/understand/word-cloud.html)
      * [ Describe ](../../../../modeling/analyze-models/describe/index.html) [ Describe ](../../../../modeling/analyze-models/describe/index.html)
        * [ Blueprint ](../../../../modeling/analyze-models/describe/blueprints.html)
        * [ Blueprint JSON ](../../../../modeling/analyze-models/describe/blueprint-json.html)
        * [ Coefficients (preprocessing) ](../../../../modeling/analyze-models/describe/coefficients.html)
        * [ Constraints (monotonic) ](../../../../modeling/analyze-models/describe/monotonic.html)
        * [ Data Quality Handling Report ](../../../../modeling/analyze-models/describe/dq-report.html)
        * [ Eureqa Models ](../../../../modeling/analyze-models/describe/eureqa.html)
        * [ Log ](../../../../modeling/analyze-models/describe/log.html)
        * [ Model Info ](../../../../modeling/analyze-models/describe/model-info.html)
        * [ Rating Tables ](../../../../modeling/analyze-models/describe/rating-table.html)
        * [ GA2M output (from Rating Tables) ](../../../../modeling/analyze-models/describe/ga2m.html)
      * [ Predict ](../../../../modeling/analyze-models/predictions/index.html) [ Predict ](../../../../modeling/analyze-models/predictions/index.html)
        * [ Deploy ](../../../../modeling/analyze-models/predictions/deploy.html)
        * [ Downloads ](../../../../modeling/analyze-models/predictions/download.html)
        * [ Make Predictions ](../../../../modeling/analyze-models/predictions/predict.html)
        * [ Portable Predictions ](../../../../modeling/analyze-models/predictions/port-pred.html)
      * [ Compliance ](../../../../modeling/analyze-models/compliance/index.html) [ Compliance ](../../../../modeling/analyze-models/compliance/index.html)
        * [ Model Compliance ](../../../../modeling/analyze-models/compliance/compliance.html)
        * [ Template Builder for compliance reports ](../../../../modeling/analyze-models/compliance/template-builder.html)
      * [ Comments ](../../../../modeling/analyze-models/comments/index.html)
      * [ Bias and Fairness ](../../../../modeling/analyze-models/bias/index.html) [ Bias and Fairness ](../../../../modeling/analyze-models/bias/index.html)
        * [ Cross-Class Accuracy ](../../../../modeling/analyze-models/bias/cross-acc.html)
        * [ Cross-Class Data Disparity ](../../../../modeling/analyze-models/bias/cross-data.html)
        * [ Per-Class Bias ](../../../../modeling/analyze-models/bias/per-class.html)
      * [ Other ](../../../../modeling/analyze-models/other/index.html) [ Other ](../../../../modeling/analyze-models/other/index.html)
        * [ Bias vs Accuracy ](../../../../modeling/analyze-models/other/bias-tab.html)
        * [ Insights ](../../../../modeling/analyze-models/other/analyze-insights.html)
        * [ Learning Curves ](../../../../modeling/analyze-models/other/learn-curve.html)
        * [ Model Comparison ](../../../../modeling/analyze-models/other/model-compare.html)
        * [ Speed vs Accuracy ](../../../../modeling/analyze-models/other/speed.html)
    * [ Specialized workflows ](../../../../modeling/special-workflows/index.html) [ Specialized workflows ](../../../../modeling/special-workflows/index.html)
      * [ Bias and Fairness resources ](../../../../modeling/special-workflows/bias-resources.html)
      * [ Composable ML ](../../../../modeling/special-workflows/cml/index.html) [ Composable ML ](../../../../modeling/special-workflows/cml/index.html)
        * [ Composable ML overview ](../../../../modeling/special-workflows/cml/cml-overview.html)
        * [ Composable ML Quickstart ](../../../../modeling/special-workflows/cml/cml-quickstart.html)
        * [ Modify a blueprint ](../../../../modeling/special-workflows/cml/cml-blueprint-edit.html)
        * [ Create custom tasks ](../../../../modeling/special-workflows/cml/cml-custom-tasks.html)
        * [ Custom environments ](../../../../modeling/special-workflows/cml/cml-custom-env.html)
        * [ DRUM CLI tool ](../../../../modeling/special-workflows/cml/cml-drum.html)
        * [ Enable network access for custom tasks ](../../../../modeling/special-workflows/cml/custom-task-network-access.html)
      * [ Document AI ](../../../../modeling/special-workflows/doc-ai/index.html) [ Document AI ](../../../../modeling/special-workflows/doc-ai/index.html)
        * [ Document AI overview ](../../../../modeling/special-workflows/doc-ai/doc-ai-overview.html)
        * [ Document ingest and modeling ](../../../../modeling/special-workflows/doc-ai/doc-ai-ingest.html)
        * [ Document AI insights ](../../../../modeling/special-workflows/doc-ai/doc-ai-insights.html)
        * [ Predictions from documents ](../../../../modeling/special-workflows/doc-ai/doc-ai-predictions.html)
      * [ Location AI ](../../../../modeling/special-workflows/location-ai/index.html) [ Location AI ](../../../../modeling/special-workflows/location-ai/index.html)
        * [ Data ingest ](../../../../modeling/special-workflows/location-ai/lai-ingest.html)
        * [ Exploratory Spatial Data Analysis (ESDA) ](../../../../modeling/special-workflows/location-ai/lai-esda.html)
        * [ Modeling ](../../../../modeling/special-workflows/location-ai/lai-model.html)
        * [ Accuracy Over Space ](../../../../modeling/special-workflows/location-ai/lai-insights.html)
      * [ Unsupervised learning ](../../../../modeling/special-workflows/unsupervised/index.html) [ Unsupervised learning ](../../../../modeling/special-workflows/unsupervised/index.html)
        * [ Anomaly detection ](../../../../modeling/special-workflows/unsupervised/anomaly-detection.html)
        * [ Clustering ](../../../../modeling/special-workflows/unsupervised/clustering.html)
      * [ Visual AI ](../../../../modeling/special-workflows/visual-ai/index.html) [ Visual AI ](../../../../modeling/special-workflows/visual-ai/index.html)
        * [ Visual AI overview ](../../../../modeling/special-workflows/visual-ai/vai-overview.html)
        * [ Build Visual AI models ](../../../../modeling/special-workflows/visual-ai/vai-model.html)
        * [ Train-time image augmentation ](../../../../modeling/special-workflows/visual-ai/tti-augment/index.html) [ Train-time image augmentation ](../../../../modeling/special-workflows/visual-ai/tti-augment/index.html)
          * [ About augmented models ](../../../../modeling/special-workflows/visual-ai/tti-augment/ttia-introduction.html)
          * [ Transformations and lists ](../../../../modeling/special-workflows/visual-ai/tti-augment/ttia-lists.html)
          * [ Use case examples ](../../../../modeling/special-workflows/visual-ai/tti-augment/ttia-examples.html)
        * [ Model insights ](../../../../modeling/special-workflows/visual-ai/vai-insights.html)
        * [ Tune models ](../../../../modeling/special-workflows/visual-ai/vai-tuning.html)
        * [ Visual AI predictions ](../../../../modeling/special-workflows/visual-ai/vai-predictions.html)
      * [ Multilabel modeling ](../../../../modeling/special-workflows/multilabel.html)
      * [ Out-of-time validation modeling ](../../../../modeling/special-workflows/otv.html)
      * [ Text AI resources ](../../../../modeling/special-workflows/textai-resources.html)
    * [ Time-series modeling ](../../../../modeling/time/index.html) [ Time-series modeling ](../../../../modeling/time/index.html)
      * [ What is time-aware modeling? ](../../../../modeling/time/whatis-time.html)
      * [ Time series modeling ](../../../../modeling/time/ts-flow-overview.html)
      * [ Time series insights ](../../../../modeling/time/ts-leaderboard.html)
      * [ Time series predictions ](../../../../modeling/time/ts-predictions.html)
      * [ Time series portable predictions with prediction intervals ](../../../../modeling/time/ts-port-pred-intervals.html)
      * [ Multiseries modeling ](../../../../modeling/time/multiseries.html)
      * [ Clustering ](../../../../modeling/time/ts-clustering.html)
      * [ Segmented modeling ](../../../../modeling/time/ts-segmented.html)
      * [ Nowcasting ](../../../../modeling/time/nowcasting.html)
      * [ External prediction comparison ](../../../../modeling/time/cyob.html)
      * [ Batch predictions for TTS and LSTM models ](../../../../modeling/time/ts-tts-lstm-batch-pred.html)
      * [ Time series advanced modeling ](../../../../modeling/time/ts-adv-modeling/index.html) [ Time series advanced modeling ](../../../../modeling/time/ts-adv-modeling/index.html)
        * [ Time series advanced options ](../../../../modeling/time/ts-adv-modeling/ts-adv-opt.html)
        * [ Clustering advanced options ](../../../../modeling/time/ts-adv-modeling/ts-cluster-adv-opt.html)
        * [ Date/time partitioning advanced options ](../../../../modeling/time/ts-adv-modeling/ts-date-time.html)
        * [ Customizing time series projects ](../../../../modeling/time/ts-adv-modeling/ts-customization.html)
      * [ Time series modeling data ](../../../../modeling/time/ts-modeling-data/index.html) [ Time series modeling data ](../../../../modeling/time/ts-modeling-data/index.html)
        * [ Create the modeling dataset ](../../../../modeling/time/ts-modeling-data/ts-create-data.html)
        * [ Data prep for time series ](../../../../modeling/time/ts-modeling-data/ts-data-prep.html)
        * [ Restore features removed by reduction ](../../../../modeling/time/ts-modeling-data/restore-features.html)
    * [ AutoML preview features ](../../../../modeling/automl-preview/index.html) [ AutoML preview features ](../../../../modeling/automl-preview/index.html)
      * [ Quantile regression analysis ](../../../../modeling/automl-preview/quantile-reg.html)
      * [ Configure hyperparameters for custom tasks ](../../../../modeling/automl-preview/cml-hyperparam.html)
    * [ Modeling FAQ ](../../../../modeling/general-modeling-faq.html)
    * [ Value Tracker ](../../../../modeling/value-tracker.html)
    * [ Project control center ](../../../../modeling/manage-projects.html)
  * [ Predictions ](../../../../predictions/index.html) [ Predictions ](../../../../predictions/index.html)
    * [ Real-time scoring methods ](../../../../predictions/realtime/index.html) [ Real-time scoring methods ](../../../../predictions/realtime/index.html)
      * [ Prediction API snippets ](../../../../predictions/realtime/code-py.html)
      * [ Qlik predictions ](../../../../predictions/realtime/integration-code-snippets.html)
    * [ Batch prediction methods ](../../../../predictions/batch/index.html) [ Batch prediction methods ](../../../../predictions/batch/index.html)
      * [ Batch prediction UI ](../../../../predictions/batch/batch-dep/index.html) [ Batch prediction UI ](../../../../predictions/batch/batch-dep/index.html)
        * [ Make a one-time batch prediction ](../../../../predictions/batch/batch-dep/batch-pred.html)
        * [ Schedule recurring batch prediction jobs ](../../../../predictions/batch/batch-dep/batch-pred-jobs.html)
        * [ Manage prediction job definitions ](../../../../predictions/batch/batch-dep/manage-pred-job-def.html)
        * [ Snowflake prediction job examples ](../../../../predictions/batch/batch-dep/pred-job-examples-snowflake.html)
      * [ Prediction monitoring jobs ](../../../../predictions/batch/pred-monitoring-jobs/index.html) [ Prediction monitoring jobs ](../../../../predictions/batch/pred-monitoring-jobs/index.html)
        * [ Create monitoring jobs ](../../../../predictions/batch/pred-monitoring-jobs/ui-monitoring-jobs.html)
        * [ Monitoring jobs API ](../../../../predictions/batch/pred-monitoring-jobs/api-monitoring-jobs.html)
        * [ Manage monitoring job definitions ](../../../../predictions/batch/pred-monitoring-jobs/manage-monitoring-job-def.html)
      * [ Manage batch jobs ](../../../../predictions/batch/batch-jobs.html)
      * [ Batch prediction scripts ](../../../../predictions/batch/cli-scripts.html)
    * [ Portable prediction methods ](../../../../predictions/port-pred/index.html) [ Portable prediction methods ](../../../../predictions/port-pred/index.html)
      * [ Scoring Code ](../../../../predictions/port-pred/scoring-code/index.html) [ Scoring Code ](../../../../predictions/port-pred/scoring-code/index.html)
        * [ Download Scoring Code from the Leaderboard ](../../../../predictions/port-pred/scoring-code/sc-download-leaderboard.html)
        * [ Download Scoring Code from a deployment ](../../../../predictions/port-pred/scoring-code/sc-download-deployment.html)
        * [ Download Scoring Code from the Leaderboard (Legacy) ](../../../../predictions/port-pred/scoring-code/sc-download-legacy.html)
        * [ Scoring Code for time series projects ](../../../../predictions/port-pred/scoring-code/sc-time-series.html)
        * [ Scoring at the command line ](../../../../predictions/port-pred/scoring-code/scoring-cli.html)
        * [ Scoring Code usage examples ](../../../../predictions/port-pred/scoring-code/quickstart-api.html)
        * [ JAR structure ](../../../../predictions/port-pred/scoring-code/jar-package.html)
        * [ Generate Java models in an existing project ](../../../../predictions/port-pred/scoring-code/build-verify.html)
        * [ Backward-compatible Java API ](../../../../predictions/port-pred/scoring-code/java-back-compat.html)
        * [ Scoring Code JAR integrations ](../../../../predictions/port-pred/scoring-code/sc-jar-integrations.html)
        * [ Android integration ](../../../../predictions/port-pred/scoring-code/android.html)
      * [ Portable Prediction Server ](../../../../predictions/port-pred/pps/index.html) [ Portable Prediction Server ](../../../../predictions/port-pred/pps/index.html)
        * [ Portable Prediction Server configuration ](../../../../predictions/port-pred/pps/portable-pps.html)
        * [ Portable Prediction Server running modes ](../../../../predictions/port-pred/pps/pps-run-modes.html)
        * [ Portable batch predictions ](../../../../predictions/port-pred/pps/portable-batch-predictions.html)
        * [ Custom model Portable Prediction Server ](../../../../predictions/port-pred/pps/custom-pps.html)
      * [ DataRobot Prime (deprecated) ](../../../../predictions/port-pred/prime/index.html)
    * [ Predictions testing ](../../../../predictions/pred-test.html)
    * [ Predictions reference ](../../../../predictions/pred-file-limits.html)
  * [ MLOps ](../../../index.html) [ MLOps ](../../../index.html)
    * [ Deployment ](../../index.html) [ Deployment ](../../index.html)
      * [ Deployment workflows ](../../deploy-workflows/index.html) [ Deployment workflows ](../../deploy-workflows/index.html)
        * [ DataRobot model in a DataRobot environment ](../../deploy-workflows/dr-model-dr-env.html)
        * [ DataRobot model in a PPS ](../../deploy-workflows/dr-model-pps-env.html)
        * [ Custom model in a DataRobot environment ](../../deploy-workflows/cus-model-dr-env.html)
        * [ Custom model in a PPS ](../../deploy-workflows/cus-model-pps-env.html)
        * [ Scoring Code in an external environment ](../../deploy-workflows/ext-dr-model-ext-env.html)
        * [ Monitor an external model with the monitoring agent ](../../deploy-workflows/ext-cus-model-ext-env.html)
      * [ Register models ](../../registry/index.html) [ Register models ](../../registry/index.html)
        * [ Model Registry ](../../registry/reg-create.html)
        * [ Register DataRobot models ](../../registry/dr-model-reg.html)
        * [ Register custom models ](../../registry/reg-custom-models.html)
        * [ Register external models ](../../registry/reg-external-models.html)
        * [ Deploy registered models ](../../registry/reg-deploy.html)
        * [ View and manage registered models ](../../registry/reg-action.html)
        * [ Generate model compliance documentation ](../../registry/reg-compliance.html)
        * [ Extend compliance documentation with key values ](../../registry/reg-key-values.html)
        * [ Custom jobs ](../../registry/reg-custom-jobs.html)
        * [ Import model packages into MLOps ](../../registry/reg-transfer.html)
        * [ Model logs for model packages (legacy) ](../../registry/reg-model-pkg-logs.html)
      * [ Prepare custom models for deployment ](../../custom-models/index.html) [ Prepare custom models for deployment ](../../custom-models/index.html)
        * [ Custom Model Workshop ](../../custom-models/custom-model-workshop/index.html) [ Custom Model Workshop ](../../custom-models/custom-model-workshop/index.html)
          * [ Create custom inference models ](../../custom-models/custom-model-workshop/custom-inf-model.html)
          * [ Manage custom model dependencies ](../../custom-models/custom-model-workshop/custom-model-dependencies.html)
          * [ Manage custom model resources ](../../custom-models/custom-model-workshop/custom-model-resource-mgmt.html)
          * [ Add custom model versions ](../../custom-models/custom-model-workshop/custom-model-versions.html)
          * [ Add training data to a custom model ](../../custom-models/custom-model-workshop/custom-model-training-data.html)
          * [ Add files from remote repos to custom models ](../../custom-models/custom-model-workshop/custom-model-repos.html)
          * [ Test custom models ](../../custom-models/custom-model-workshop/custom-model-test.html)
          * [ Manage custom models ](../../custom-models/custom-model-workshop/custom-model-actions.html)
          * [ Register custom models ](../../custom-models/custom-model-workshop/custom-model-reg.html)
          * [ Create custom model proxies for external models ](../../custom-models/custom-model-workshop/ext-model-proxy.html)
          * [ GitHub Actions for custom models ](../../custom-models/custom-model-workshop/custom-model-github-action.html)
        * [ Custom model environments ](../../custom-models/custom-model-environments/index.html) [ Custom model environments ](../../custom-models/custom-model-environments/index.html)
          * [ Drop-in environments ](../../custom-models/custom-model-environments/drop-in-environments.html)
          * [ Custom environments ](../../custom-models/custom-model-environments/custom-environments.html)
      * [ Prepare for external model deployment ](../../ext-model-prep/index.html) [ Prepare for external model deployment ](../../ext-model-prep/index.html)
        * [ Add external prediction environments ](../../ext-model-prep/ext-pred-env.html)
        * [ Manage prediction environments ](../../ext-model-prep/ext-pred-env-manage.html)
        * [ Register external models ](../../ext-model-prep/ext-model-reg.html)
      * [ Manage prediction environments ](../../prediction-env/index.html) [ Manage prediction environments ](../../prediction-env/index.html)
        * [ Add DataRobot Serverless prediction environments ](../../prediction-env/pred-env.html)
        * [ Add external prediction environments ](../../prediction-env/ext-pred-env.html)
        * [ Manage prediction environments ](../../prediction-env/pred-env-manage.html)
        * [ Deploy a model to a prediction environment ](../../prediction-env/pred-env-deploy.html)
        * [ Prediction environment integrations ](../../prediction-env/pred-env-integrations/index.html) [ Prediction environment integrations ](../../prediction-env/pred-env-integrations/index.html)
          * [ Automated deployment and replacement of Scoring Code in AzureML ](../../prediction-env/pred-env-integrations/azureml-sc-deploy-replace.html)
          * [ Automated deployment and replacement in Sagemaker ](../../prediction-env/pred-env-integrations/sagemaker-cm-deploy-replace.html)
      * [ Deploy models ](../../deploy-methods/index.html) [ Deploy models ](../../deploy-methods/index.html)
        * [ Deploy DataRobot models ](../../deploy-methods/deploy-model.html)
        * [ Deploy custom models ](../../deploy-methods/deploy-custom-inf-model.html)
        * [ Deploy external models ](../../deploy-methods/deploy-external-model.html)
        * [ Configure deployment settings ](../../deploy-methods/add-deploy-info.html)
        * [ Add prediction data post-deployment ](../../deploy-methods/add-prediction-data-post-deploy.html)
      * [ MLOps agents ](../index.html) [ MLOps agents ](../index.html)
        * [ Monitoring agent ](../monitoring-agent/index.html) [ Monitoring agent ](../monitoring-agent/index.html)
          * [ Installation and configuration ](../monitoring-agent/agent.html)
          * [ Examples directory ](../monitoring-agent/agent-ex.html)
          * [ Monitoring agent use cases ](../monitoring-agent/agent-use.html)
          * [ Environment variables ](../monitoring-agent/env-var.html)
          * [ Library and agent spooler configuration ](../monitoring-agent/spooler.html)
          * [ Download Scoring Code ](../monitoring-agent/agent-sc.html)
          * [ Monitoring external multiclass deployments ](../monitoring-agent/agent-multi.html)
        * [ Management agent ](index.html) [ Management agent ](index.html)
          * [ Installation and configuration ](mgmt-agent-install.html)
          * [ Configure environment plugins ](mgmt-agent-plugins.html)
          * [ Install the management agent for Kubernetes ](mgmt-agent-kubernetes.html) [ Install the management agent for Kubernetes ](mgmt-agent-kubernetes.html)

[For Self-Managed AI Platform users running v11.1, see the on-premise platform
documentation __](/11.1/en/docs/index.html)

Install the management agent for Kubernetes

            * Overview 
              * Architecture overviews 
            * Prerequisites 
            * Configure software requirements 
            * Configure registry credentials 
            * Install the management agent with Helm 
              * Fetch the Portable Prediction Server image 
              * Build the required Docker images 
              * Create a new Prediction Environment 
              * Install the Helm chart 

          * [ Management agent deployment status and events ](mgmt-agent-events-status.html)
          * [ Relaunch deployments ](mgmt-agent-relaunch.html)
          * [ Force delete deployments ](mgmt-agent-delete.html)
        * [ Agent event log ](../agent-event-log.html)
    * [ Deployment settings ](../../../deployment-settings/index.html) [ Deployment settings ](../../../deployment-settings/index.html)
      * [ Set up service health monitoring ](../../../deployment-settings/service-health-settings.html)
      * [ Set up data drift monitoring ](../../../deployment-settings/data-drift-settings.html)
      * [ Set up accuracy monitoring ](../../../deployment-settings/accuracy-settings.html)
      * [ Set up fairness monitoring ](../../../deployment-settings/fairness-settings.html)
      * [ Set up humility rules ](../../../deployment-settings/humility-settings.html)
      * [ Configure retraining ](../../../deployment-settings/retraining-settings.html)
      * [ Configure challengers ](../../../deployment-settings/challengers-settings.html)
      * [ Configure predictions settings ](../../../deployment-settings/predictions-settings.html)
      * [ Enable data exploration ](../../../deployment-settings/data-exploration-settings.html)
      * [ Set up custom metrics monitoring ](../../../deployment-settings/custom-metrics-settings.html)
      * [ Set up timeliness tracking ](../../../deployment-settings/usage-settings.html)
    * [ Lifecycle management ](../../../manage-mlops/index.html) [ Lifecycle management ](../../../manage-mlops/index.html)
      * [ Deployment inventory ](../../../manage-mlops/deploy-inventory.html)
      * [ Manage deployments ](../../../manage-mlops/actions-menu.html)
      * [ Replace deployed models ](../../../manage-mlops/deploy-replace.html)
      * [ Manage Automated Retraining policies ](../../../manage-mlops/set-up-auto-retraining.html)
    * [ Performance monitoring ](../../../monitor/index.html) [ Performance monitoring ](../../../monitor/index.html)
      * [ Overview tab ](../../../monitor/dep-overview.html)
      * [ Accuracy tab ](../../../monitor/deploy-accuracy.html)
      * [ Data Drift tab ](../../../monitor/data-drift.html)
      * [ Service Health tab ](../../../monitor/service-health.html)
      * [ Challengers tab ](../../../monitor/challengers.html)
      * [ Usage tab ](../../../monitor/deploy-usage.html)
      * [ Data Exploration tab ](../../../monitor/data-exploration.html)
      * [ Custom Metrics tab ](../../../monitor/custom-metrics.html)
      * [ Segmented analysis ](../../../monitor/deploy-segment.html)
      * [ Batch monitoring ](../../../monitor/deploy-batch-monitor.html)
      * [ Generative model monitoring ](../../../monitor/generative-model-monitoring.html)
    * [ Governance ](../../../governance/index.html) [ Governance ](../../../governance/index.html)
      * [ Model deployment approval workflow ](../../../governance/dep-admin.html)
      * [ Governance lens ](../../../governance/gov-lens.html)
      * [ Notifications tab ](../../../governance/deploy-notifications.html)
      * [ Humility tab ](../../../governance/humble.html)
      * [ Fairness tab ](../../../governance/mlops-fairness.html)
      * [ Deployment reports ](../../../governance/deploy-reports.html)
    * [ MLOps preview features ](../../../mlops-preview/index.html) [ MLOps preview features ](../../../mlops-preview/index.html)
      * [ Service Health and Accuracy history ](../../../mlops-preview/pp-deploy-history.html)
      * [ Automated deployment and replacement of Scoring Code in Snowflake ](../../../mlops-preview/pp-snowflake-sc-deploy-replace.html)
      * [ Run the monitoring agent in DataRobot ](../../../mlops-preview/monitoring-agent-in-dr.html)
      * [ Feature cache for Feature Discovery deployments ](../../../mlops-preview/safer-ft-cache.html)
      * [ MLOps reporting for unstructured models ](../../../mlops-preview/mlops-unstructured-models.html)
    * [ MLOps FAQ ](../../../mlops-faq.html)
  * [ Notebooks ](../../../../dr-notebooks/index.html) [ Notebooks ](../../../../dr-notebooks/index.html)
    * [ Manage notebooks ](../../../../dr-notebooks/manage-nb/index.html) [ Manage notebooks ](../../../../dr-notebooks/manage-nb/index.html)
      * [ Add notebooks ](../../../../dr-notebooks/manage-nb/dr-create-nb.html)
      * [ Notebook settings ](../../../../dr-notebooks/manage-nb/dr-settings-nb.html)
      * [ Notebook versioning ](../../../../dr-notebooks/manage-nb/dr-revise-nb.html)
    * [ Notebook coding experience ](../../../../dr-notebooks/code-nb/index.html) [ Notebook coding experience ](../../../../dr-notebooks/code-nb/index.html)
      * [ Environment management ](../../../../dr-notebooks/code-nb/dr-env-nb.html)
      * [ Create and execute cells ](../../../../dr-notebooks/code-nb/dr-cell-nb.html)
      * [ Cell actions ](../../../../dr-notebooks/code-nb/dr-action-nb.html)
      * [ Code intelligence ](../../../../dr-notebooks/code-nb/dr-code-int.html)
      * [ Notebook terminals ](../../../../dr-notebooks/code-nb/dr-terminal-nb.html)
      * [ Azure OpenAI Service integration ](../../../../dr-notebooks/code-nb/dr-openai-nb.html)
    * [ Notebook reference ](../../../../dr-notebooks/dr-notebook-ref.html)
  * [ AI Apps ](../../../../app-builder/index.html) [ AI Apps ](../../../../app-builder/index.html)
    * [ Create applications ](../../../../app-builder/create-app.html)
    * [ Manage applications ](../../../../app-builder/current-app.html)
    * [ Edit no-code applications ](../../../../app-builder/edit-apps/index.html) [ Edit no-code applications ](../../../../app-builder/edit-apps/index.html)
      * [ Pages ](../../../../app-builder/edit-apps/app-pages.html)
      * [ Widgets ](../../../../app-builder/edit-apps/app-widgets.html)
      * [ What-if and Optimizer ](../../../../app-builder/edit-apps/whatif-opt.html)
      * [ Settings ](../../../../app-builder/edit-apps/app-settings.html)
    * [ Use no-code applications ](../../../../app-builder/use-apps/index.html) [ Use no-code applications ](../../../../app-builder/use-apps/index.html)
      * [ Make predictions ](../../../../app-builder/use-apps/app-make-pred.html)
      * [ View prediction results ](../../../../app-builder/use-apps/app-analyze-result.html)
    * [ Time series applications ](../../../../app-builder/ts-app.html)
    * [ Custom apps ](../../../../app-builder/custom-apps/index.html) [ Custom apps ](../../../../app-builder/custom-apps/index.html)
      * [ Upload custom applications ](../../../../app-builder/custom-apps/app-upload-custom.html)
      * [ Host custom applications ](../../../../app-builder/custom-apps/custom-apps-hosting.html)
      * [ Manage custom applications ](../../../../app-builder/custom-apps/manage-custom-apps.html)
    * [ AI App reference ](../../../../app-builder/reference/index.html) [ AI App reference ](../../../../app-builder/reference/index.html)
      * [ Default widgets ](../../../../app-builder/reference/default-widgets.html)
      * [ Optional widgets ](../../../../app-builder/reference/optional-widgets.html)
    * [ AI App preview features ](../../../../app-builder/app-preview/index.html) [ AI App preview features ](../../../../app-builder/app-preview/index.html)
      * [ Prefill application templates ](../../../../app-builder/app-preview/app-prefill.html)
      * [ Feature Discovery support in No-Code AI Apps ](../../../../app-builder/app-preview/app-ft-cache.html)
  * [ Integrations ](../../../../integrations/index.html) [ Integrations ](../../../../integrations/index.html)
    * [ AWS ](../../../../integrations/aws/index.html) [ AWS ](../../../../integrations/aws/index.html)
      * [ Import data from AWS S3 ](../../../../integrations/aws/import-from-aws-s3.html)
      * [ Deploy models on AWS EKS ](../../../../integrations/aws/deploy-dr-models-on-aws.html)
      * [ Path-based routing to PPS ](../../../../integrations/aws/path-based-routing-to-pps-on-aws.html)
      * [ Score Snowflake data on AWS EMR Spark ](../../../../integrations/aws/score-snowflake-aws-emr-spark.html)
      * [ Ingest data with AWS Athena ](../../../../integrations/aws/ingest-athena.html)
      * [ AWS Lambda ](../../../../integrations/aws/lambda/index.html) [ AWS Lambda ](../../../../integrations/aws/lambda/index.html)
        * [ AWS Lambda reporting to MLOps ](../../../../integrations/aws/lambda/aws-lambda-reporting-to-mlops.html)
        * [ Use DataRobot Prime models with AWS Lambda ](../../../../integrations/aws/lambda/prime-lambda.html)
        * [ Use Scoring Code with AWS Lambda ](../../../../integrations/aws/lambda/sc-lambda.html)
      * [ Amazon SageMaker ](../../../../integrations/aws/sagemaker/index.html) [ Amazon SageMaker ](../../../../integrations/aws/sagemaker/index.html)
        * [ Deploy models on SageMaker ](../../../../integrations/aws/sagemaker/sagemaker-deploy.html)
        * [ Use Scoring Code with AWS SageMaker ](../../../../integrations/aws/sagemaker/sc-sagemaker.html)
    * [ Azure ](../../../../integrations/azure/index.html) [ Azure ](../../../../integrations/azure/index.html)
      * [ Run Batch Prediction jobs from Azure Blob Storage ](../../../../integrations/azure/azure-blob-storage-batch-pred.html)
      * [ Deploy and monitor DataRobot models in Azure Kubernetes Service ](../../../../integrations/azure/aks-deploy-and-monitor.html)
      * [ Deploy and monitor Spark models with DataRobot MLOps ](../../../../integrations/azure/spark-deploy-and-monitor.html)
      * [ Deploy and monitor ML.NET models with DataRobot MLOps ](../../../../integrations/azure/mlnet-deploy-and-monitor.html)
      * [ Use Scoring Code with Azure ML ](../../../../integrations/azure/sc-azureml.html)
    * [ Google ](../../../../integrations/google/index.html) [ Google ](../../../../integrations/google/index.html)
      * [ Deploy and monitor models on GCP ](../../../../integrations/google/google-cloud-platform.html)
      * [ Deploy the MLOps agent on GKE ](../../../../integrations/google/mlops-agent-with-gke.html)
    * [ Snowflake ](../../../../integrations/snowflake/index.html) [ Snowflake ](../../../../integrations/snowflake/index.html)
      * [ Data ingest and project creation ](../../../../integrations/snowflake/sf-project-creation.html)
      * [ Real-time predictions ](../../../../integrations/snowflake/sf-client-scoring.html)
      * [ Server-side model scoring ](../../../../integrations/snowflake/sf-server-scoring.html)
      * [ Snowflake external functions and streams ](../../../../integrations/snowflake/sf-function-streams.html)
      * [ Generate Snowflake UDF Scoring Code ](../../../../integrations/snowflake/snowflake-sc.html)

[For Self-Managed AI Platform users running v11.1, see the on-premise platform
documentation __](/11.1/en/docs/index.html)

Install the management agent for Kubernetes

  * Overview 
    * Architecture overviews 
  * Prerequisites 
  * Configure software requirements 
  * Configure registry credentials 
  * Install the management agent with Helm 
    * Fetch the Portable Prediction Server image 
    * Build the required Docker images 
    * Create a new Prediction Environment 
    * Install the Helm chart 

[MLOps](../../../index.html "MLOps") > [Deployment](../../index.html
"Deployment") > [MLOps agents](../index.html "MLOps agents") > [Management
agent](index.html "Management agent") > Install the management agent for
Kubernetes

# Management agent Helm installation for Kubernetes¶

This process provides an example of a management agent use case, using a Helm
chart to aid in the installation and configuration of the management agent and
the Kubernetes plugin.

Important

The Kubernetes plugin and Helm chart used in this process are examples; they
may need to be modified to suit your needs.

## Overview¶

The MLOps management agent provides a mechanism to automate model deployment
to any infrastructure. Kubernetes is a popular solution for deploying and
monitoring models outside DataRobot, orchestrated by the management and
monitoring agents. To streamline the installation and configuration of the
management agent and the Kubernetes plugin, you can use the contents of the
`/tools/charts/datarobot-management-agent` directory in the agent tarball.

The `/tools/charts/datarobot-management-agent` directory contains the files
required for a [Helm chart](https://helm.sh/docs/topics/charts/) that you can
modify to install and configure the management agent and its Kubernetes plugin
for your preferred cloud environment: Amazon Web Services, Azure, Google Cloud
Platform, or OpenShift. It also supports standard Docker Hub installation and
configuration. This directory includes the default `values.yaml` file (located
at `/tools/charts/datarobot-management-agent/values.yaml` in the agent
tarball) and customizable example `values.yaml` files for each environment
(located in the `/tools/charts/datarobot-management-agent/examples` directory
of the agent tarball). You can copy and update the environment-specific
`values.yaml` file you need and use `--values <filename>` to overlay the
default values.

### Architecture overviews¶

General overviewDetailed overviewMonitoring overviewDocker image build
overview

[![](../../../../images/mgmt-agent-helm-arch.png)](../../../../images/mgmt-
agent-helm-arch.png)

[![](../../../../images/mgmt-agent-helm-arch2.png)](../../../../images/mgmt-
agent-helm-arch2.png)

[![](../../../../images/mgmt-agent-helm-arch3.png)](../../../../images/mgmt-
agent-helm-arch3.png) The diagram above shows a detailed view of how the
management agent deploys models into Kubernetes and enables model monitoring.

[![](../../../../images/mgmt-agent-helm-arch4.png)](../../../../images/mgmt-
agent-helm-arch4.png) The diagram above shows the specifics of how DataRobot
models are packaged into a deployable image for Kubernetes. This architecture
leverages an open-source tool maintained by Google called
[Kaniko](https://github.com/GoogleContainerTools/kaniko), designed to build
Docker images inside a Kubernetes cluster securely.

## Prerequisites¶

Before you begin, you must build and push the management agent Docker image to
a registry accessible by your Kubernetes cluster. If you haven't done this,
see the [MLOps management agent](index.html) overview.

Once you have a management agent Docker image, set up a Kubernetes cluster
with the following requirements:

Software RequirementsHardware Requirements

  * Kubernetes clusters (version v1.21+)
  * Nginx Ingress
  * Docker Registry

  * 2+ CPUs
  * 40+ GB of instance storage (image cache)
  * 6+ GB of memory

Important

All requirements are for the latest version of the management agent.

## Configure software requirements¶

To install and configure the required software resources, follow the processes
outlined below:

KubernetesNginx IngressDocker Registry

Any Kubernetes cluster running version 1.21 or higher is supported. Follow the
documentation for your chosen distribution to create a new cluster. This
process also supports OpenShift version 4.8 and above.

Important

If you are using OpenShift, you should skip this prerequisite. OpenShift uses
the built-in [Ingress Controller](https://docs.openshift.com/container-
platform/latest/networking/ingress-operator.html).

Currently, the only supported ingress controller is the open-source [Nginx-
Ingress](https://kubernetes.github.io/ingress-nginx/) controller (>=4.0.0). To
install Nginx Ingress in your environment, see the Nginx Ingress documentation
or try the example script below:

    
    
    # Create a namespace for your ingress resources
    kubectl create namespace ingress-mlops
    
    # Add the ingress-nginx repository
    helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
    helm repo update
    
    # Use Helm to deploy an NGINX ingress controller
    #
    # These settings should be considered sane defaults to help quickly get you started.
    # You should consult the official documentation to determine the best settings for
    # your expected prediction load. With Helm, it is trivial to change any of these
    # settings down the road.
    helm install nginx-ingress ingress-nginx/ingress-nginx \
        --namespace ingress-mlops \
        --set controller.ingressClassResource.name=mlops \
        --set controller.autoscaling.enabled=true \
        --set controller.autoscaling.minReplicas=2 \
        --set controller.autoscaling.maxReplicas=3 \
        --set controller.config.proxy-body-size=51m \
        --set controller.config.proxy-read-timeout=605s \
        --set controller.config.proxy-send-timeout=605s \
        --set controller.config.proxy-connect-timeout=65s \
        --set controller.metrics.enabled=true
    

This process supports the major cloud vendor's managed registries (ECR, ACR,
GCR) in addition to Docker Hub or any standard V2 Docker registry. If your
registry requires pre-created repositories (i.e., ECR), you should create the
following repositories:

  * `datarobot/mlops-management-agent`
  * `datarobot/mlops-tracking-agent`
  * `datarobot/datarobot-portable-prediction-api`
  * `mlops/frozen-models`

Important

You must provide the management agent push access to the `mlops/frozen-model`
repo. Examples of several common registry types are provided below. If you are
using GCR or OpenShift, the path for each Docker repository above must be
modified to suit your environment.

## Configure registry credentials¶

To configure the Docker Registry for your cloud solution, follow the relevant
process outlined below. The section provides examples for the following
registries:

  * Amazon Elastic Container Registry (ECR)
  * Microsoft Azure Container Registry (ACR)
  * Google Cloud Platform Container Registry (GCR)
  * OpenShift Integrated Registry
  * Generic Registry (Docker Hub)

ECRACRGCROpenShift Integrated RegistryDocker Hub

First, create all required repositories listed above using the ECR UI or using
the following command:

    
    
    repos="datarobot/mlops-management-agent
    datarobot/mlops-tracking-agent
    datarobot/datarobot-portable-prediction-api
    mlops/frozen-model"
    for repo in $repos; do
    aws ecr create-repository --repository-name $repo
    done
    

To provide push credentials to the agent, use an [IAM role for the service
account](https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-
service-accounts.html):

    
    
    eksctl create iamserviceaccount --approve \
        --cluster <your-cluster-name> \
        --namespace datarobot-mlops \
        --name datarobot-management-agent-image-builder \
        --attach-policy-arn arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryPowerUser
    

Next, create a file called `config.json` with the following contents:

    
    
    { "credsStore": "ecr-login" }
    

Use that JSON file to create a `ConfigMap`:

    
    
    kubectl create configmap docker-config \
        --namespace datarobot-mlops \
        --from-file=<path to config.json>
    

Update the `imageBuilder` section of the `values.yaml` file (located at
`/tools/charts/datarobot-management-agent/values.yaml` in the agent tarball)
to use the `configMap` you created and to configure `serviceAccount` with the
IAM role you created:

    
    
    imageBuilder:
    ...
    configMap: "docker-config"
    serviceAccount:
        create: false
        name: "datarobot-management-agent-image-builder"
    

First, in your ACR registry, under **Settings** > **Access keys** , enable the
[**Admin user** setting](https://docs.microsoft.com/en-us/azure/container-
registry/container-registry-authentication?tabs=azure-cli#admin-account).
Then, use one of the generated passwords to create a new secret:

    
    
    kubectl create secret docker-registry registry-creds \
        --namespace datarobot-mlops \
        --docker-server=<container-registry-name>.azurecr.io \
        --docker-username=<admin-username> \
        --docker-password=<admin-password>
    

Note

This process assumes you already created the `datarobot-mlops` namespace.

Next, update the `imageBuilder` section of the `values.yaml` file (located at
`/tools/charts/datarobot-management-agent/values.yaml` in the agent tarball)
to use the `secretName` for the secret you created:

    
    
    imageBuilder:
    ...
    secretName: "registry-creds"
    

You should use Workload Identity in your GKE cluster to provide GCR push
credentials to the Docker image building service. This process consists of the
following steps:

  * [Enable Workload Identity](https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity#enable_on_cluster)
  * [Migrate existing node pools](https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity#migrate_applications_to)
  * [Authenticate with Workload Identity](https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity#authenticating_to)

In this section, you can find the minimal configuration required to complete
this guide.

First, enable Workload Identity on your cluster and **all** of your node
groups:

    
    
    # Enable workload identity on your existing cluster
    gcloud container clusters update <CLUSTER-NAME> \
    --workload-pool=<PROJECT-NAME>.svc.id.goog
    
    # Enable workload identity on an existing node pool
    gcloud container node-pools update <NODE-POOL-NAME> \
    --cluster=<CLUSTER-NAME> \
    --workload-metadata=GKE_METADATA
    

When the cluster is ready, create a new IAM Service Account and attach a role
that provides all necessary permissions to the image builder service. The
image builder service must be able to push new images into GCR, and the IAM
Service Account must be able to bind to the GKE ServiceAccount created upon
installation:

    
    
    # Create Service Account
    gcloud iam service-accounts create gcr-push-user
    
    # Give user push access to GCR
    gcloud projects add-iam-policy-binding <PROJECT-NAME> \
    --member=serviceAccount:[gcr-push-user]@<PROJECT-NAME>.iam.gserviceaccount.com \
    --role=roles/cloudbuild.builds.builder
    
    # Link GKE ServiceAccount with the IAM Service Account
    gcloud iam service-accounts add-iam-policy-binding \
    --role roles/iam.workloadIdentityUser \
    --member "serviceAccount:<PROJECT-NAME>.svc.id.goog[datarobot-mlops/datarobot-management-agent-image-builder]" \
    gcr-push-user@<PROJECT-NAME>.iam.gserviceaccount.com
    

Finally, update the `imageBuilder` section of the `values.yaml` file (located
at `/tools/charts/datarobot-management-agent/values.yaml` in the agent
tarball) to create a `serviceAccount` with the `annotations` and `name`
created in previous steps:

    
    
    imageBuilder:
    ...
    serviceAccount:
        create: true
        annotations: {
        iam.gke.io/gcp-service-account: gcr-push-user@<PROJECT-NAME>.iam.gserviceaccount.com
        }
        name: datarobot-management-agent-image-builder
    

OpenShift provides a [built-in registry
solution](https://docs.openshift.com/container-
platform/4.8/registry/index.html). This is the recommended container registry
if you are using OpenShift.

Later in this guide, you are required to push images built locally _into_ the
registry. To make this easier, use the following command to expose the
registry externally:

    
    
    oc patch configs.imageregistry.operator.openshift.io/cluster --patch '{"spec":{"defaultRoute":true}}' --type=merge
    

See the [OpenShift documentation](https://docs.openshift.com/container-
platform/4.8/registry/securing-exposing-registry.html) to learn to log in to
this registry to push images to it.

In addition, you should create a dedicated Image Builder service account with
[permission](https://docs.openshift.com/container-
platform/4.8/authentication/managing-security-context-constraints.html) to run
as `root` and to [push](https://docs.openshift.com/container-
platform/4.8/registry/accessing-the-registry.html) to the integrated Docker
registry:

    
    
    oc new-project datarobot-mlops
    oc create sa datarobot-management-agent-image-builder
    
    # Allows the SA to push to the registry
    oc policy add-role-to-user registry-editor -z datarobot-management-agent-image-builder
    
    # Our Docker builds require the ability to run as `root` to build our images
    oc adm policy add-scc-to-user anyuid -z datarobot-management-agent-image-builder
    

When OpenShift created a Docker registry authentication secret, it created it
in the incorrect format (`kubernetes.io/dockercfg` instead of
`kubernetes.io/dockerconfigjson`). To fix this, create a secret using the
appropriate token. To do this, find the existing `Image pull secrets` assigned
to the `datarobot-management-agent-image-builder` ServiceAccount:

    
    
    $ oc describe sa/datarobot-management-agent-image-builder
    
    Name:                datarobot-management-agent-image-builder
    Namespace:           datarobot-mlops
    Labels:              <none>
    Annotations:         <none>
    Image pull secrets:  datarobot-management-agent-image-builder-dockercfg-p6p5b
    Mountable secrets:   datarobot-management-agent-image-builder-dockercfg-p6p5b
                        datarobot-management-agent-image-builder-token-pj9ks
    Tokens:              datarobot-management-agent-image-builder-token-p6dnc
                        datarobot-management-agent-image-builder-token-pj9ks
    Events:              <none>
    

Next, track back from the pull secret back to the raw token:

    
    
    $ oc describe secret $(oc get secret/datarobot-management-agent-image-builder-dockercfg-p6p5b -o jsonpath='{.metadata.annotations.openshift\.io/token-secret\.name}')
    
    Name:         datarobot-management-agent-image-builder-token-p6dnc
    Namespace:    datarobot-mlops
    Labels:       <none>
    Annotations:  kubernetes.io/created-by: openshift.io/create-dockercfg-secrets
                kubernetes.io/service-account.name: datarobot-management-agent-image-builder
                kubernetes.io/service-account.uid: 34101931-d402-49bf-83df-7a60b31cdf44
    
    Type:  kubernetes.io/service-account-token
    
    Data
    ====
    ca.crt:          11253 bytes
    namespace:       10 bytes
    service-ca.crt:  12466 bytes
    token:           eyJhbGciOiJSUzI1NiIsImtpZCI6InJqcEx5LTFjOElpM2FKRzdOdDNMY...
    
    
    
    oc create secret docker-registry registry-creds \
        --docker-server=image-registry.openshift-image-registry.svc:5000 \
        --docker-username=imagebuilder \
        --docker-password=eyJhbGciOiJSUzI1NiIsImtpZCI6InJqcEx5LTFjOElpM2FKRzdOdDNMY...
    

Update the `imageBuilder` section of the `values.yaml` file (located at
`/tools/charts/datarobot-management-agent/values.yaml` in the agent tarball)
to reference the `serviceAccount` created above:

    
    
    imageBuilder:
    ...
    secretName: registry-creds
    
    rbac:
        create: false
    serviceAccount:
        create: false
        name: datarobot-management-agent-image-builder
    

It's common for the internal registry to be signed by an internal CA. To avoid
this, skip TLS verification in the `values.yaml` configuration:

    
    
    imageBuilder:
    ...
    skipSslVerifyRegistries:
        - image-registry.openshift-image-registry.svc:5000
    

If you have the CA certificate, a more secure option would be to mount it as a
`secret` or a `configMap` and then configure the `imageBuilder` to use it.
Below we will show a third option of how you can obtain the CA directly from
the underlying node:

    
    
    imageBuilder:
    ...
    extraVolumes:
        - name: cacert
        hostPath:
            path: /etc/docker/certs.d
    
    extraVolumeMounts:
        - name: cacert
        mountPath: /certs/
        readOnly: true
    
    extraArguments:
        - --registry-certificate=image-registry.openshift-image-registry.svc:5000=/certs/image-registry.openshift-image-registry.svc:5000/ca.crt
    

Note

The example above requires elevated SCC privileges.

    
    
    oc adm policy add-scc-to-user hostmount-anyuid -z datarobot-management-agent-image-builder
    

If you have a generic registry that uses a simple Docker username/password to
log in, you can use the following procedure.

Create a secret containing your Docker registry credentials:

    
    
    kubectl create secret docker-registry registry-creds \
        --namespace datarobot-mlops \
        --docker-server=<container-registry-name>.your-company.com \
        --docker-username=<push-username> \
        --docker-password=<push-password>
    

Update the `imageBuilder` section of the `values.yaml` file (located at
`/tools/charts/datarobot-management-agent/values.yaml` in the agent tarball)
to use the new secret you created:

    
    
    imageBuilder:
    ...
    secretName: "registry-creds"
    

If your registry is running on HTTP, you will need to add the following to the
above example:

    
    
    imageBuilder:
    ...
    secretName: "registry-creds"
    insecureRegistries:
        - <container-registry-name>.your-company.com
    

## Install the management agent with Helm¶

After the prerequisites are configured, install the MLOps management agent. In
these steps, you will be building and pushing large docker images up to your
remote registry. DataRobot recommends running these steps in parallel while
downloads or uploads are happening.

### Fetch the Portable Prediction Server image¶

The first step is to download the latest version of the [Portable Prediction
Server Docker Image](../../../../platform/acct-settings/api-key-
mgmt.html#portable-prediction-server-docker-image) from DataRobot's Developer
Tools. When the download completes, run the following commands:

  1. Load the PPS Docker image: 
         
         docker load < datarobot-portable-prediction-api-<VERSION>.tar.gz
         

  2. Tag the PPS Docker image with an image name:

Note

Don't use `latest` as the `<VERSION>` tag.

         
         docker tag datarobot/datarobot-portable-prediction-api:<VERSION> registry.your-company.com/datarobot/datarobot-portable-prediction-api:<VERSION>
         

  3. Push the PPS Docker image to your remote registry: 
         
         docker push your-company.com/datarobot/datarobot-portable-prediction-api:<VERSION>
         

### Build the required Docker images¶

First, build the management agent image with a single command:

    
    
    make -C tools/bosun_docker REGISTRY=registry.your-company.com push
    

Next, build the monitoring agent with a similar command:

Note

If you don't plan on enabling model monitoring, you can skip this step.

    
    
    make -C tools/agent_docker REGISTRY=registry.your-company.com push
    

### Create a new Prediction Environment¶

To create a new prediction environment, see the [Prediction
environments](../../prediction-env/index.html) documentation. Record the
**Prediction Environment ID** for later use.

Note

Only the `DataRobot` and `Custom Model` model formats are currently supported.

### Install the Helm chart¶

DataRobot recommends installing the agent into its own namespace. To do so,
pre-create it and install the MLOps API key in it.

    
    
    # Create a namespace to contain the agent and all the models it deploys
    kubectl create namespace datarobot-mlops
    
    # You can use an existing key or we recommend creating a key dedicated to the agent
    # by browsing here:
    #   https://app.datarobot.com/account/developer-tools
    kubectl -n datarobot-mlops create secret generic mlops-api-key --from-literal=secret=<YOUR-API-TOKEN>
    

You can modify one of several common examples for the various cloud
environments (located in the `/tools/charts/datarobot-management-
agent/examples` directory of the agent tarball) to suit your account; then you
can install the agent with the appropriate version of the following command:

    
    
    helm upgrade --install bosun . \
        --namespace datarobot-mlops \
        --values ./examples/AKE_values.yaml
    

If none of the provided examples suit your needs, the _minimum_ command to
install the agent is as follows:

    
    
    helm upgrade --install bosun . \
        --namespace datarobot-mlops \
        --set predictionServer.ingressClassName=mlops \
        --set predictionServer.outfacingUrlRoot=http://your-company.com/deployments/ \
        --set datarobot.apiSecretName=mlops-api-key \
        --set datarobot.predictionEnvId=<PRED ENV ID> \
        --set managementAgent.repository=registry.your-company.com/datarobot/mlops-management-agent \
        --set trackingAgent.image=registry.your-company.com/datarobot/mlops-tracking-agent:latest \
        --set imageBuilder.ppsImage=registry.your-company.com/datarobot/datarobot-portable-prediction-api:<VERSION> \
        --set imageBuilder.generatedImageRepository=registry.your-company.com/mlops/frozen-models
    

There are several additional configurations to review in the `values.yaml`
file (located at `/tools/charts/datarobot-management-agent/values.yaml` in the
agent tarball) or using the following command:

    
    
    helm show values .
    

Back to top

